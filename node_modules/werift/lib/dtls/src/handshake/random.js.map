{"version":3,"file":"random.js","sourceRoot":"","sources":["../../../../../dtls/src/handshake/random.ts"],"names":[],"mappings":";;;AAAA,sDAAsD;AACtD,6CAAoD;AACpD,mCAAqC;AAErC,MAAa,UAAU;IAMrB,YACS,gBAAgB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAC7C,eAAe,oBAAW,CAAC,EAAE,CAAC;QAD9B,kBAAa,GAAb,aAAa,CAAgC;QAC7C,iBAAY,GAAZ,YAAY,CAAkB;IACpC,CAAC;IAEJ,MAAM,CAAC,WAAW,CAAC,GAAW;QAC5B,OAAO,IAAI,UAAU;QACnB,YAAY;QACZ,GAAG,MAAM,CAAC,MAAM,CAAC,oBAAM,CAAC,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAC/C,CAAC;IACJ,CAAC;IAED,MAAM,CAAC,IAAI,CAAC,IAA4B;QACtC,YAAY;QACZ,OAAO,IAAI,UAAU,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAChD,CAAC;IAED,SAAS;QACP,MAAM,GAAG,GAAG,oBAAM,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC;QAClD,OAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;;AA1BH,gCA2BC;AA1BiB,eAAI,GAAG;IACrB,aAAa,EAAE,mBAAK,CAAC,QAAQ;IAC7B,YAAY,EAAE,mBAAK,CAAC,MAAM,CAAC,EAAE,CAAC;CAC/B,CAAC","sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { decode, encode, types } from \"binary-data\";\nimport { randomBytes } from \"crypto\";\n\nexport class DtlsRandom {\n  static readonly spec = {\n    gmt_unix_time: types.uint32be,\n    random_bytes: types.buffer(28),\n  };\n\n  constructor(\n    public gmt_unix_time = Math.floor(Date.now() / 1000),\n    public random_bytes = randomBytes(28)\n  ) {}\n\n  static deSerialize(buf: Buffer) {\n    return new DtlsRandom(\n      //@ts-ignore\n      ...Object.values(decode(buf, DtlsRandom.spec))\n    );\n  }\n\n  static from(spec: typeof DtlsRandom.spec) {\n    //@ts-ignore\n    return new DtlsRandom(...Object.values(spec));\n  }\n\n  serialize() {\n    const res = encode(this, DtlsRandom.spec).slice();\n    return Buffer.from(res);\n  }\n}\n"]}