eab38b3838965df5d930ec2f414a5827
'use strict';

const BufferList = require('internal/buffer-list');

test('append(Buffer)', () => {
  const bl = new BufferList();
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9]);

  bl.append(buf1);
  expect(bl.length).toEqual(buf1.length);

  bl.append([buf1, buf2]);
  expect(bl.length).toEqual(buf1.length * 2 + buf2.length);
});

test('append(BufferList)', () => {
  const bl = new BufferList();
  const src = new BufferList();
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9]);

  src.append([buf1, buf2]);

  bl.append(src);
  expect(bl.length).toEqual(buf1.length + buf2.length);

  bl.append(buf1);
  bl.append(src);
  expect(bl.length).toEqual(buf1.length * 3 + buf2.length * 2);
});

test('consume(bytes)', () => {
  const bl = new BufferList();
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9]);

  bl.append([buf1, buf2]);
  bl.consume(2);

  expect(bl.length).toEqual(buf1.length + buf2.length - 2);
  expect(bl.offset).toEqual(2);

  bl.consume(3);
  expect(bl.offset).toEqual(0);
  expect(bl.length).toEqual(buf2.length);
});

test('append() after consume()', () => {
  const bl = new BufferList();
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9]);

  bl.append(buf1);
  bl.consume(2);
  bl.append(buf2);

  expect(bl.offset).toEqual(0);
  expect(bl.length).toEqual(buf1.length + buf2.length - 2);
});

test('append(BufferList) after consume()', () => {
  const bl = new BufferList();

  const src1 = new BufferList();
  src1.append(Buffer.from([1, 2, 3, 4, 5]));

  const src2 = new BufferList();
  src2.append(Buffer.from([6, 7, 8, 9]));

  bl.append(src1);
  bl.consume(2);
  bl.append(src2);

  expect(bl.offset).toEqual(0);
  expect(bl.slice()).toEqual(Buffer.from([3, 4, 5, 6, 7, 8, 9]));
});

test('append consumed BufferList', () => {
  const bl = new BufferList();

  const src1 = new BufferList();
  src1.append(Buffer.from([1, 2, 3, 4, 5]));

  const src2 = new BufferList();
  src2.append(Buffer.from([6, 7, 8, 9]));
  src2.consume(2);

  bl.append(src1);
  bl.append(src2);

  expect(bl.offset).toEqual(0);
  expect(bl.slice()).toEqual(Buffer.from([1, 2, 3, 4, 5, 8, 9]));
});

test('get(i)', () => {
  const bl = new BufferList();
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9]);

  bl.append([buf1, buf2]);

  expect(bl.get(0)).toEqual(buf1[0]);
  expect(bl.get(bl.length - 1)).toEqual(buf2[3]);
  expect(bl.get(-1)).toEqual(buf2[3]);
  expect(bl.get(bl.length + 1)).toEqual(buf1[1]);

  bl.consume(2);

  expect(bl.get(0)).toEqual(buf1[2]);
  expect(bl.get(bl.length - 1)).toEqual(buf2[3]);
  expect(bl.get(-1)).toEqual(buf2[3]);
  expect(bl.get(bl.length + 1)).toEqual(buf1[3]);
});

test('indexOf(i)', () => {
  const bl = new BufferList();
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 0]);

  bl.append([buf1, buf2]);

  expect(bl.indexOf(1)).toBe(0);
  expect(bl.indexOf(3)).toBe(2);
  expect(bl.indexOf(5)).toBe(4);
  expect(bl.indexOf(8)).toBe(7);
  expect(bl.indexOf(0)).toBe(8);

  bl.consume(2);
  expect(bl.indexOf(5)).toBe(2);
  expect(bl.indexOf(8)).toBe(5);
  expect(bl.indexOf(0)).toBe(6);

  expect(() => bl.indexOf(-1)).toThrow('Invalid argument 1');
  expect(() => bl.indexOf(300)).toThrow('Invalid argument 1');
  expect(() => bl.indexOf(null)).toThrow('Invalid argument 1');
});

test('indexOf(i, offset)', () => {
  const bl = new BufferList();
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9]);

  bl.append([buf1, buf2]);

  expect(bl.indexOf(3, 2)).toBe(2);
  expect(bl.indexOf(8, 2)).toBe(7);
  expect(bl.indexOf(8, 6)).toBe(7);
  expect(bl.indexOf(9, 2)).toBe(8);
  expect(bl.indexOf(9, 6)).toBe(8);

  bl.consume(2);
  expect(bl.indexOf(8, 2)).toBe(5);
  expect(bl.indexOf(8, 4)).toBe(5);
});

test('indexOf(i, offset) multiple', () => {
  const bl = new BufferList();
  const buf1 = Buffer.from([1, 2, 0, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 0]);

  bl.append([buf1, buf2]);

  expect(bl.indexOf(0, 2)).toBe(2);
  expect(bl.indexOf(0, 6)).toBe(8);

  bl.consume(2);
  expect(bl.indexOf(0, 0)).toBe(0);
  expect(bl.indexOf(0, 4)).toBe(6);
});

test('indexOf() index - offset = -1', () => {
  const buf = Buffer.from([1, 2, 3, 4, 5, 6, 0, 7, 8, 9, 10, 64, 21, 0]);
  const bl = new BufferList();

  bl.append(buf);

  expect(bl.indexOf(0)).toBe(6);
  bl.consume(7);
  expect(bl.indexOf(0)).toBe(6);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1ZmZlci1saXN0LmpzIl0sIm5hbWVzIjpbIkJ1ZmZlckxpc3QiLCJyZXF1aXJlIiwidGVzdCIsImJsIiwiYnVmMSIsIkJ1ZmZlciIsImZyb20iLCJidWYyIiwiYXBwZW5kIiwiZXhwZWN0IiwibGVuZ3RoIiwidG9FcXVhbCIsInNyYyIsImNvbnN1bWUiLCJvZmZzZXQiLCJzcmMxIiwic3JjMiIsInNsaWNlIiwiZ2V0IiwiaW5kZXhPZiIsInRvQmUiLCJ0b1Rocm93IiwiYnVmIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxhQUFhQyxRQUFRLHNCQUFSLENBQW5COztBQUVBQyxLQUFLLGdCQUFMLEVBQXVCLE1BQU07QUFDM0IsUUFBTUMsS0FBSyxJQUFJSCxVQUFKLEVBQVg7QUFDQSxRQUFNSSxPQUFPQyxPQUFPQyxJQUFQLENBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLEVBQWEsQ0FBYixDQUFaLENBQWI7QUFDQSxRQUFNQyxPQUFPRixPQUFPQyxJQUFQLENBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLENBQVosQ0FBYjs7QUFFQUgsS0FBR0ssTUFBSCxDQUFVSixJQUFWO0FBQ0FLLFNBQU9OLEdBQUdPLE1BQVYsRUFBa0JDLE9BQWxCLENBQTBCUCxLQUFLTSxNQUEvQjs7QUFFQVAsS0FBR0ssTUFBSCxDQUFVLENBQUNKLElBQUQsRUFBT0csSUFBUCxDQUFWO0FBQ0FFLFNBQU9OLEdBQUdPLE1BQVYsRUFBa0JDLE9BQWxCLENBQTBCUCxLQUFLTSxNQUFMLEdBQWMsQ0FBZCxHQUFrQkgsS0FBS0csTUFBakQ7QUFDRCxDQVZEOztBQVlBUixLQUFLLG9CQUFMLEVBQTJCLE1BQU07QUFDL0IsUUFBTUMsS0FBSyxJQUFJSCxVQUFKLEVBQVg7QUFDQSxRQUFNWSxNQUFNLElBQUlaLFVBQUosRUFBWjtBQUNBLFFBQU1JLE9BQU9DLE9BQU9DLElBQVAsQ0FBWSxDQUFDLENBQUQsRUFBSSxD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QUFPQyxJQUFQLENBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLEVBQWEsQ0FBYixFQUFnQixDQUFoQixFQUFtQixDQUFuQixFQUFzQixDQUF0QixFQUF5QixDQUF6QixFQUE0QixDQUE1QixFQUErQixFQUEvQixFQUFtQyxFQUFuQyxFQUF1QyxFQUF2QyxFQUEyQyxDQUEzQyxDQUFaLENBQVo7QUFDQSxRQUFNSCxLQUFLLElBQUlILFVBQUosRUFBWDs7QUFFQUcsS0FBR0ssTUFBSCxDQUFVYyxHQUFWOztBQUVBYixTQUFPTixHQUFHZ0IsT0FBSCxDQUFXLENBQVgsQ0FBUCxFQUFzQkMsSUFBdEIsQ0FBMkIsQ0FBM0I7QUFDQWpCLEtBQUdVLE9BQUgsQ0FBVyxDQUFYO0FBQ0FKLFNBQU9OLEdBQUdnQixPQUFILENBQVcsQ0FBWCxDQUFQLEVBQXNCQyxJQUF0QixDQUEyQixDQUEzQjtBQUNELENBVEQiLCJmaWxlIjoiYnVmZmVyLWxpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IEJ1ZmZlckxpc3QgPSByZXF1aXJlKCdpbnRlcm5hbC9idWZmZXItbGlzdCcpO1xuXG50ZXN0KCdhcHBlbmQoQnVmZmVyKScsICgpID0+IHtcbiAgY29uc3QgYmwgPSBuZXcgQnVmZmVyTGlzdCgpO1xuICBjb25zdCBidWYxID0gQnVmZmVyLmZyb20oWzEsIDIsIDMsIDQsIDVdKTtcbiAgY29uc3QgYnVmMiA9IEJ1ZmZlci5mcm9tKFs2LCA3LCA4LCA5XSk7XG5cbiAgYmwuYXBwZW5kKGJ1ZjEpO1xuICBleHBlY3QoYmwubGVuZ3RoKS50b0VxdWFsKGJ1ZjEubGVuZ3RoKTtcblxuICBibC5hcHBlbmQoW2J1ZjEsIGJ1ZjJdKTtcbiAgZXhwZWN0KGJsLmxlbmd0aCkudG9FcXVhbChidWYxLmxlbmd0aCAqIDIgKyBidWYyLmxlbmd0aCk7XG59KTtcblxudGVzdCgnYXBwZW5kKEJ1ZmZlckxpc3QpJywgKCkgPT4ge1xuICBjb25zdCBibCA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIGNvbnN0IHNyYyA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMiwgMywgNCwgNV0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzYsIDcsIDgsIDldKTtcblxuICBzcmMuYXBwZW5kKFtidWYxLCBidWYyXSk7XG5cbiAgYmwuYXBwZW5kKHNyYyk7XG4gIGV4cGVjdChibC5sZW5ndGgpLnRvRXF1YWwoYnVmMS5sZW5ndGggKyBidWYyLmxlbmd0aCk7XG5cbiAgYmwuYXBwZW5kKGJ1ZjEpO1xuICBibC5hcHBlbmQoc3JjKTtcbiAgZXhwZWN0KGJsLmxlbmd0aCkudG9FcXVhbChidWYxLmxlbmd0aCAqIDMgKyBidWYyLmxlbmd0aCAqIDIpO1xufSk7XG5cbnRlc3QoJ2NvbnN1bWUoYnl0ZXMpJywgKCkgPT4ge1xuICBjb25zdCBibCA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMiwgMywgNCwgNV0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzYsIDcsIDgsIDldKTtcblxuICBibC5hcHBlbmQoW2J1ZjEsIGJ1ZjJdKTtcbiAgYmwuY29uc3VtZSgyKTtcblxuICBleHBlY3QoYmwubGVuZ3RoKS50b0VxdWFsKGJ1ZjEubGVuZ3RoICsgYnVmMi5sZW5ndGggLSAyKTtcbiAgZXhwZWN0KGJsLm9mZnNldCkudG9FcXVhbCgyKTtcblxuICBibC5jb25zdW1lKDMpO1xuICBleHBlY3QoYmwub2Zmc2V0KS50b0VxdWFsKDApO1xuICBleHBlY3QoYmwubGVuZ3RoKS50b0VxdWFsKGJ1ZjIubGVuZ3RoKTtcbn0pO1xuXG50ZXN0KCdhcHBlbmQoKSBhZnRlciBjb25zdW1lKCknLCAoKSA9PiB7XG4gIGNvbnN0IGJsID0gbmV3IEJ1ZmZlckxpc3QoKTtcbiAgY29uc3QgYnVmMSA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0LCA1XSk7XG4gIGNvbnN0IGJ1ZjIgPSBCdWZmZXIuZnJvbShbNiwgNywgOCwgOV0pO1xuXG4gIGJsLmFwcGVuZChidWYxKTtcbiAgYmwuY29uc3VtZSgyKTtcbiAgYmwuYXBwZW5kKGJ1ZjIpO1xuXG4gIGV4cGVjdChibC5vZmZzZXQpLnRvRXF1YWwoMCk7XG4gIGV4cGVjdChibC5sZW5ndGgpLnRvRXF1YWwoYnVmMS5sZW5ndGggKyBidWYyLmxlbmd0aCAtIDIpO1xufSk7XG5cbnRlc3QoJ2FwcGVuZChCdWZmZXJMaXN0KSBhZnRlciBjb25zdW1lKCknLCAoKSA9PiB7XG4gIGNvbnN0IGJsID0gbmV3IEJ1ZmZlckxpc3QoKTtcblxuICBjb25zdCBzcmMxID0gbmV3IEJ1ZmZlckxpc3QoKTtcbiAgc3JjMS5hcHBlbmQoQnVmZmVyLmZyb20oWzEsIDIsIDMsIDQsIDVdKSk7XG5cbiAgY29uc3Qgc3JjMiA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHNyYzIuYXBwZW5kKEJ1ZmZlci5mcm9tKFs2LCA3LCA4LCA5XSkpO1xuXG4gIGJsLmFwcGVuZChzcmMxKTtcbiAgYmwuY29uc3VtZSgyKTtcbiAgYmwuYXBwZW5kKHNyYzIpO1xuXG4gIGV4cGVjdChibC5vZmZzZXQpLnRvRXF1YWwoMCk7XG4gIGV4cGVjdChibC5zbGljZSgpKS50b0VxdWFsKEJ1ZmZlci5mcm9tKFszLCA0LCA1LCA2LCA3LCA4LCA5XSkpO1xufSk7XG5cbnRlc3QoJ2FwcGVuZCBjb25zdW1lZCBCdWZmZXJMaXN0JywgKCkgPT4ge1xuICBjb25zdCBibCA9IG5ldyBCdWZmZXJMaXN0KCk7XG5cbiAgY29uc3Qgc3JjMSA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHNyYzEuYXBwZW5kKEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0LCA1XSkpO1xuXG4gIGNvbnN0IHNyYzIgPSBuZXcgQnVmZmVyTGlzdCgpO1xuICBzcmMyLmFwcGVuZChCdWZmZXIuZnJvbShbNiwgNywgOCwgOV0pKTtcbiAgc3JjMi5jb25zdW1lKDIpO1xuXG4gIGJsLmFwcGVuZChzcmMxKTtcbiAgYmwuYXBwZW5kKHNyYzIpO1xuXG4gIGV4cGVjdChibC5vZmZzZXQpLnRvRXF1YWwoMCk7XG4gIGV4cGVjdChibC5zbGljZSgpKS50b0VxdWFsKEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0LCA1LCA4LCA5XSkpO1xufSk7XG5cbnRlc3QoJ2dldChpKScsICgpID0+IHtcbiAgY29uc3QgYmwgPSBuZXcgQnVmZmVyTGlzdCgpO1xuICBjb25zdCBidWYxID0gQnVmZmVyLmZyb20oWzEsIDIsIDMsIDQsIDVdKTtcbiAgY29uc3QgYnVmMiA9IEJ1ZmZlci5mcm9tKFs2LCA3LCA4LCA5XSk7XG5cbiAgYmwuYXBwZW5kKFtidWYxLCBidWYyXSk7XG5cbiAgZXhwZWN0KGJsLmdldCgwKSkudG9FcXVhbChidWYxWzBdKTtcbiAgZXhwZWN0KGJsLmdldChibC5sZW5ndGggLSAxKSkudG9FcXVhbChidWYyWzNdKTtcbiAgZXhwZWN0KGJsLmdldCgtMSkpLnRvRXF1YWwoYnVmMlszXSk7XG4gIGV4cGVjdChibC5nZXQoYmwubGVuZ3RoICsgMSkpLnRvRXF1YWwoYnVmMVsxXSk7XG5cbiAgYmwuY29uc3VtZSgyKTtcblxuICBleHBlY3QoYmwuZ2V0KDApKS50b0VxdWFsKGJ1ZjFbMl0pO1xuICBleHBlY3QoYmwuZ2V0KGJsLmxlbmd0aCAtIDEpKS50b0VxdWFsKGJ1ZjJbM10pO1xuICBleHBlY3QoYmwuZ2V0KC0xKSkudG9FcXVhbChidWYyWzNdKTtcbiAgZXhwZWN0KGJsLmdldChibC5sZW5ndGggKyAxKSkudG9FcXVhbChidWYxWzNdKTtcbn0pO1xuXG50ZXN0KCdpbmRleE9mKGkpJywgKCkgPT4ge1xuICBjb25zdCBibCA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMiwgMywgNCwgNV0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzYsIDcsIDgsIDBdKTtcblxuICBibC5hcHBlbmQoW2J1ZjEsIGJ1ZjJdKTtcblxuICBleHBlY3QoYmwuaW5kZXhPZigxKSkudG9CZSgwKTtcbiAgZXhwZWN0KGJsLmluZGV4T2YoMykpLnRvQmUoMik7XG4gIGV4cGVjdChibC5pbmRleE9mKDUpKS50b0JlKDQpO1xuICBleHBlY3QoYmwuaW5kZXhPZig4KSkudG9CZSg3KTtcbiAgZXhwZWN0KGJsLmluZGV4T2YoMCkpLnRvQmUoOCk7XG5cbiAgYmwuY29uc3VtZSgyKTtcbiAgZXhwZWN0KGJsLmluZGV4T2YoNSkpLnRvQmUoMik7XG4gIGV4cGVjdChibC5pbmRleE9mKDgpKS50b0JlKDUpO1xuICBleHBlY3QoYmwuaW5kZXhPZigwKSkudG9CZSg2KTtcblxuICBleHBlY3QoKCkgPT4gYmwuaW5kZXhPZigtMSkpLnRvVGhyb3coJ0ludmFsaWQgYXJndW1lbnQgMScpO1xuICBleHBlY3QoKCkgPT4gYmwuaW5kZXhPZigzMDApKS50b1Rocm93KCdJbnZhbGlkIGFyZ3VtZW50IDEnKTtcbiAgZXhwZWN0KCgpID0+IGJsLmluZGV4T2YobnVsbCkpLnRvVGhyb3coJ0ludmFsaWQgYXJndW1lbnQgMScpO1xufSk7XG5cbnRlc3QoJ2luZGV4T2YoaSwgb2Zmc2V0KScsICgpID0+IHtcbiAgY29uc3QgYmwgPSBuZXcgQnVmZmVyTGlzdCgpO1xuICBjb25zdCBidWYxID0gQnVmZmVyLmZyb20oWzEsIDIsIDMsIDQsIDVdKTtcbiAgY29uc3QgYnVmMiA9IEJ1ZmZlci5mcm9tKFs2LCA3LCA4LCA5XSk7XG5cbiAgYmwuYXBwZW5kKFtidWYxLCBidWYyXSk7XG5cbiAgZXhwZWN0KGJsLmluZGV4T2YoMywgMikpLnRvQmUoMik7XG4gIGV4cGVjdChibC5pbmRleE9mKDgsIDIpKS50b0JlKDcpO1xuICBleHBlY3QoYmwuaW5kZXhPZig4LCA2KSkudG9CZSg3KTtcbiAgZXhwZWN0KGJsLmluZGV4T2YoOSwgMikpLnRvQmUoOCk7XG4gIGV4cGVjdChibC5pbmRleE9mKDksIDYpKS50b0JlKDgpO1xuXG4gIGJsLmNvbnN1bWUoMik7XG4gIGV4cGVjdChibC5pbmRleE9mKDgsIDIpKS50b0JlKDUpO1xuICBleHBlY3QoYmwuaW5kZXhPZig4LCA0KSkudG9CZSg1KTtcbn0pO1xuXG50ZXN0KCdpbmRleE9mKGksIG9mZnNldCkgbXVsdGlwbGUnLCAoKSA9PiB7XG4gIGNvbnN0IGJsID0gbmV3IEJ1ZmZlckxpc3QoKTtcbiAgY29uc3QgYnVmMSA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAwLCA0LCA1XSk7XG4gIGNvbnN0IGJ1ZjIgPSBCdWZmZXIuZnJvbShbNiwgNywgOCwgMF0pO1xuXG4gIGJsLmFwcGVuZChbYnVmMSwgYnVmMl0pO1xuXG4gIGV4cGVjdChibC5pbmRleE9mKDAsIDIpKS50b0JlKDIpO1xuICBleHBlY3QoYmwuaW5kZXhPZigwLCA2KSkudG9CZSg4KTtcblxuICBibC5jb25zdW1lKDIpO1xuICBleHBlY3QoYmwuaW5kZXhPZigwLCAwKSkudG9CZSgwKTtcbiAgZXhwZWN0KGJsLmluZGV4T2YoMCwgNCkpLnRvQmUoNik7XG59KTtcblxudGVzdCgnaW5kZXhPZigpIGluZGV4IC0gb2Zmc2V0ID0gLTEnLCAoKSA9PiB7XG4gIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0LCA1LCA2LCAwLCA3LCA4LCA5LCAxMCwgNjQsIDIxLCAwXSk7XG4gIGNvbnN0IGJsID0gbmV3IEJ1ZmZlckxpc3QoKTtcblxuICBibC5hcHBlbmQoYnVmKTtcblxuICBleHBlY3QoYmwuaW5kZXhPZigwKSkudG9CZSg2KTtcbiAgYmwuY29uc3VtZSg3KTtcbiAgZXhwZWN0KGJsLmluZGV4T2YoMCkpLnRvQmUoNik7XG59KTtcbiJdfQ==