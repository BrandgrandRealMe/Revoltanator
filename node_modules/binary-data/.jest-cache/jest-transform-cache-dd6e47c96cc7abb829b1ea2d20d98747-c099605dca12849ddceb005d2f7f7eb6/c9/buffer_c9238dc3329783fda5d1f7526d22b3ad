a9da746f0cfe43d3200ba508b4a90dec
'use strict';

const buffer = require('types/buffer');
const BinaryStream = require('lib/binary-stream');

describe('buffer', () => {
  describe('argument `length` is number', () => {
    test('encode', () => {
      const writeBuffer = jest.fn();
      const wstream = {
        writeBuffer
      };

      const length = 2;
      const buf = Buffer.allocUnsafe(length);

      const type = buffer(length);

      type.encode(buf, wstream);

      expect(writeBuffer).toHaveBeenCalledTimes(1);
      expect(writeBuffer).toBeCalledWith(buf);
      expect(type.encode.bytes).toBe(length);
    });

    test('should not encode large buffer', () => {
      const length = 2;

      const wstream = {};

      const buf = Buffer.allocUnsafe(length + 1);
      const type = buffer(length);

      expect(() => type.encode(buf, wstream)).toThrow(`Buffer required length ${length} instead of ${buf.length}`);
    });

    test('decode', () => {
      const length = 2;
      const buf = Buffer.allocUnsafe(length);

      const readBuffer = jest.fn().mockImplementation(() => buf);
      const rstream = {
        readBuffer
      };

      const type = buffer(length);

      expect(type.decode(rstream)).toBe(buf);
      expect(readBuffer).toHaveBeenCalledTimes(1);
      expect(readBuffer).toBeCalledWith(length);
      expect(type.decode.bytes).toBe(length);
    });

    test('encodingLength', () => {
      const length = 2;

      const type = buffer(length);
      expect(type.encodingLength(Buffer.alloc(0))).toBe(length);
    });
  });

  describe('argument `length` is type', () => {
    test('encode', () => {
      const writeBuffer = jest.fn();
      const wstream = {
        writeBuffer
      };

      const length = 2;
      const lengthBytes = 3;
      const buf = Buffer.allocUnsafe(length);

      const lengthType = {
        decode() {},
        encode: jest.fn().mockImplementation(() => {
          lengthType.encode.bytes = lengthBytes;
        })
      };

      const type = buffer(lengthType);
      type.encode(buf, wstream);

      expect(lengthType.encode).toHaveBeenCalledTimes(1);
      expect(lengthType.encode).toBeCalledWith(length, wstream);
      expect(writeBuffer).toHaveBeenCalledTimes(1);
      expect(writeBuffer).toBeCalledWith(buf);
      expect(type.encode.bytes).toBe(length + lengthBytes);
    });

    test('decode', () => {
      const length = 2;
      const buf = Buffer.allocUnsafe(length);

      const readBuffer = jest.fn().mockImplementation(() => buf);
      const lengthBytes = 5;

      const rstream = {
        readBuffer
      };

      const lengthType = {
        decode: () => length,
        encode() {}
      };

      lengthType.decode.bytes = lengthBytes;

      const type = buffer(lengthType);

      expect(type.decode(rstream)).toBe(buf);
      expect(readBuffer).toHaveBeenCalledTimes(1);
      expect(readBuffer).toBeCalledWith(length);
      expect(type.decode.bytes).toBe(buf.length + lengthBytes);
    });

    test('encodingLength', () => {
      const length = 5;
      const typeLength = 2;
      const buf = Buffer.allocUnsafe(length);

      const lengthType = {
        encode() {},
        decode() {},
        encodingLength() {
          return typeLength;
        }
      };

      const type = buffer(lengthType);

      expect(type.encodingLength(buf)).toBe(typeLength + length);
    });
  });

  describe('argument `length` is function', () => {
    test('decode', () => {
      const length = 2;
      const buf = Buffer.allocUnsafe(length);

      const readBuffer = jest.fn().mockImplementation(() => buf);

      const rstream = {
        readBuffer
      };

      const callback = jest.fn().mockImplementation(() => length);
      const type = buffer(callback);

      expect(type.decode(rstream)).toBe(buf);
      expect(readBuffer).toHaveBeenCalledTimes(1);
      expect(readBuffer).toBeCalledWith(length);
      expect(callback).toHaveBeenCalledTimes(1);
      expect(type.decode.bytes).toBe(length);
    });

    test('encode', () => {
      const writeBuffer = jest.fn();

      const wstream = {
        writeBuffer
      };

      const length = 2;
      const buf = Buffer.allocUnsafe(length);

      const callback = jest.fn().mockImplementation(() => length);
      const type = buffer(callback);

      type.encode(buf, wstream);

      expect(writeBuffer).toHaveBeenCalledTimes(1);
      expect(writeBuffer).toBeCalledWith(buf);
      expect(callback).toHaveBeenCalledTimes(1);
      expect(type.encode.bytes).toBe(length);
    });

    test('encodingLength', () => {
      const length = 5;

      const type = buffer(() => length * 2);
      expect(type.encodingLength(Buffer.alloc(length))).toBe(length);
    });
  });

  describe('argument `length` is null', () => {
    test('decode', () => {
      const buf = Buffer.from([1, 2, 3, 4, 5, 0, 5, 6, 7, 8]);
      const length = buf.indexOf(0);
      const expected = buf.slice(0, length);

      const rstream = {
        readBuffer: jest.fn().mockImplementation(size => buf.slice(0, size)),
        indexOf: jest.fn().mockImplementation(byte => buf.indexOf(byte)),
        consume: jest.fn()
      };

      const type = buffer(null);

      expect(type.decode(rstream)).toEqual(expected);
      expect(type.decode.bytes).toEqual(length + 1);
    });

    test('encode', () => {
      const buf = Buffer.from([1, 2, 3, 4, 5]);
      const writeBuffer = jest.fn();
      const writeUInt8 = jest.fn();
      const wstream = {
        writeBuffer,
        writeUInt8
      };

      const type = buffer(null);

      type.encode(buf, wstream);

      expect(writeBuffer).toHaveBeenCalledTimes(1);
      expect(writeBuffer).toBeCalledWith(buf);
      expect(writeUInt8).toHaveBeenCalledTimes(1);
      expect(writeUInt8).toBeCalledWith(0);
      expect(type.encode.bytes).toBe(buf.length + 1);
    });

    test('encodingLength', () => {
      const buf = Buffer.from([1, 2, 3, 4, 5]);
      const type = buffer(null);

      expect(type.encodingLength(buf)).toBe(buf.length + 1);
    });
  });

  test('should be able to encode BinaryStream', () => {
    jest.unmock('lib/binary-stream');

    const buf = new BinaryStream();
    buf.writeBuffer(Buffer.from([1, 2]));
    buf.writeBuffer(Buffer.from([3, 4]));

    const wstream = new BinaryStream();
    const type = buffer(null);

    type.encode(buf, wstream);

    expect(wstream.slice()).toEqual(Buffer.from([1, 2, 3, 4, 3]));
    expect(type.encode.bytes).toBe(buf.length + 1);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1ZmZlci5qcyJdLCJuYW1lcyI6WyJidWZmZXIiLCJyZXF1aXJlIiwiQmluYXJ5U3RyZWFtIiwiZGVzY3JpYmUiLCJ0ZXN0Iiwid3JpdGVCdWZmZXIiLCJqZXN0IiwiZm4iLCJ3c3RyZWFtIiwibGVuZ3RoIiwiYnVmIiwiQnVmZmVyIiwiYWxsb2NVbnNhZmUiLCJ0eXBlIiwiZW5jb2RlIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwidG9CZUNhbGxlZFdpdGgiLCJieXRlcyIsInRvQmUiLCJ0b1Rocm93IiwicmVhZEJ1ZmZlciIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInJzdHJlYW0iLCJkZWNvZGUiLCJlbmNvZGluZ0xlbmd0aCIsImFsbG9jIiwibGVuZ3RoQnl0ZXMiLCJsZW5ndGhUeXBlIiwidHlwZUxlbmd0aCIsImNhbGxiYWNrIiwiZnJvbSIsImluZGV4T2YiLCJleHBlY3RlZCIsInNsaWNlIiwic2l6ZSIsImJ5dGUiLCJjb25zdW1lIiwidG9FcXVhbCIsIndyaXRlVUludDgiLCJ1bm1vY2siXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE1BQU1BLFNBQVNDLFFBQVEsY0FBUixDQUFmO0FBQ0EsTUFBTUMsZUFBZUQsUUFBUSxtQkFBUixDQUFyQjs7QUFFQUUsU0FBUyxRQUFULEVBQW1CLE1BQU07QUFDdkJBLFdBQVMsNkJBQVQsRUFBd0MsTUFBTTtBQUM1Q0MsU0FBSyxRQUFMLEVBQWUsTUFBTTtBQUNuQixZQUFNQyxjQUFjQyxLQUFLQyxFQUFMLEVBQXBCO0FBQ0EsWUFBTUMsVUFBVTtBQUNkSDtBQURjLE9BQWhCOztBQUlBLFlBQU1JLFNBQVMsQ0FBZjtBQUNBLFlBQU1DLE1BQU1DLE9BQU9DLFdBQVAsQ0FBbUJILE1BQW5CLENBQVo7O0FBRUEsWUFBTUksT0FBT2IsT0FBT1MsTUFBUCxDQUFiOztBQUVBSSxXQUFLQyxNQUFMLENBQVlKLEdBQVosRUFBaUJGLE9BQWpCOztBQUVBTyxhQUFPVixXQUFQLEVBQW9CVyxxQkFBcEIsQ0FB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QU07QUFDM0IsWUFBTU0sTUFBTUMsT0FBT29CLElBQVAsQ0FBWSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLENBQVosQ0FBWjtBQUNBLFlBQU1sQixPQUFPYixPQUFPLElBQVAsQ0FBYjs7QUFFQWUsYUFBT0YsS0FBS1ksY0FBTCxDQUFvQmYsR0FBcEIsQ0FBUCxFQUFpQ1MsSUFBakMsQ0FBc0NULElBQUlELE1BQUosR0FBYSxDQUFuRDtBQUNELEtBTEQ7QUFNRCxHQTVDRDs7QUE4Q0FMLE9BQUssdUNBQUwsRUFBOEMsTUFBTTtBQUNsREUsU0FBS2tDLE1BQUwsQ0FBWSxtQkFBWjs7QUFFQSxVQUFNOUIsTUFBTSxJQUFJUixZQUFKLEVBQVo7QUFDQVEsUUFBSUwsV0FBSixDQUFnQk0sT0FBT29CLElBQVAsQ0FBWSxDQUFDLENBQUQsRUFBSSxDQUFKLENBQVosQ0FBaEI7QUFDQXJCLFFBQUlMLFdBQUosQ0FBZ0JNLE9BQU9vQixJQUFQLENBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixDQUFaLENBQWhCOztBQUVBLFVBQU12QixVQUFVLElBQUlOLFlBQUosRUFBaEI7QUFDQSxVQUFNVyxPQUFPYixPQUFPLElBQVAsQ0FBYjs7QUFFQWEsU0FBS0MsTUFBTCxDQUFZSixHQUFaLEVBQWlCRixPQUFqQjs7QUFFQU8sV0FBT1AsUUFBUTBCLEtBQVIsRUFBUCxFQUF3QkksT0FBeEIsQ0FBZ0MzQixPQUFPb0IsSUFBUCxDQUFZLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVixFQUFhLENBQWIsQ0FBWixDQUFoQztBQUNBaEIsV0FBT0YsS0FBS0MsTUFBTCxDQUFZSSxLQUFuQixFQUEwQkMsSUFBMUIsQ0FBK0JULElBQUlELE1BQUosR0FBYSxDQUE1QztBQUNELEdBZEQ7QUFlRCxDQWxQRCIsImZpbGUiOiJidWZmZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGJ1ZmZlciA9IHJlcXVpcmUoJ3R5cGVzL2J1ZmZlcicpO1xuY29uc3QgQmluYXJ5U3RyZWFtID0gcmVxdWlyZSgnbGliL2JpbmFyeS1zdHJlYW0nKTtcblxuZGVzY3JpYmUoJ2J1ZmZlcicsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2FyZ3VtZW50IGBsZW5ndGhgIGlzIG51bWJlcicsICgpID0+IHtcbiAgICB0ZXN0KCdlbmNvZGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB3cml0ZUJ1ZmZlciA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IHdzdHJlYW0gPSB7XG4gICAgICAgIHdyaXRlQnVmZmVyLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbGVuZ3RoID0gMjtcbiAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpO1xuXG4gICAgICBjb25zdCB0eXBlID0gYnVmZmVyKGxlbmd0aCk7XG5cbiAgICAgIHR5cGUuZW5jb2RlKGJ1Ziwgd3N0cmVhbSk7XG5cbiAgICAgIGV4cGVjdCh3cml0ZUJ1ZmZlcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgZXhwZWN0KHdyaXRlQnVmZmVyKS50b0JlQ2FsbGVkV2l0aChidWYpO1xuICAgICAgZXhwZWN0KHR5cGUuZW5jb2RlLmJ5dGVzKS50b0JlKGxlbmd0aCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbm90IGVuY29kZSBsYXJnZSBidWZmZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBsZW5ndGggPSAyO1xuXG4gICAgICBjb25zdCB3c3RyZWFtID0ge307XG5cbiAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGggKyAxKTtcbiAgICAgIGNvbnN0IHR5cGUgPSBidWZmZXIobGVuZ3RoKTtcblxuICAgICAgZXhwZWN0KCgpID0+IHR5cGUuZW5jb2RlKGJ1Ziwgd3N0cmVhbSkpLnRvVGhyb3coXG4gICAgICAgIGBCdWZmZXIgcmVxdWlyZWQgbGVuZ3RoICR7bGVuZ3RofSBpbnN0ZWFkIG9mICR7YnVmLmxlbmd0aH1gXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGVjb2RlJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGVuZ3RoID0gMjtcbiAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpO1xuXG4gICAgICBjb25zdCByZWFkQnVmZmVyID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBidWYpO1xuICAgICAgY29uc3QgcnN0cmVhbSA9IHtcbiAgICAgICAgcmVhZEJ1ZmZlcixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHR5cGUgPSBidWZmZXIobGVuZ3RoKTtcblxuICAgICAgZXhwZWN0KHR5cGUuZGVjb2RlKHJzdHJlYW0pKS50b0JlKGJ1Zik7XG4gICAgICBleHBlY3QocmVhZEJ1ZmZlcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgZXhwZWN0KHJlYWRCdWZmZXIpLnRvQmVDYWxsZWRXaXRoKGxlbmd0aCk7XG4gICAgICBleHBlY3QodHlwZS5kZWNvZGUuYnl0ZXMpLnRvQmUobGVuZ3RoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2VuY29kaW5nTGVuZ3RoJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGVuZ3RoID0gMjtcblxuICAgICAgY29uc3QgdHlwZSA9IGJ1ZmZlcihsZW5ndGgpO1xuICAgICAgZXhwZWN0KHR5cGUuZW5jb2RpbmdMZW5ndGgoQnVmZmVyLmFsbG9jKDApKSkudG9CZShsZW5ndGgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYXJndW1lbnQgYGxlbmd0aGAgaXMgdHlwZScsICgpID0+IHtcbiAgICB0ZXN0KCdlbmNvZGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB3cml0ZUJ1ZmZlciA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IHdzdHJlYW0gPSB7XG4gICAgICAgIHdyaXRlQnVmZmVyLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbGVuZ3RoID0gMjtcbiAgICAgIGNvbnN0IGxlbmd0aEJ5dGVzID0gMztcbiAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpO1xuXG4gICAgICBjb25zdCBsZW5ndGhUeXBlID0ge1xuICAgICAgICBkZWNvZGUoKSB7fSxcbiAgICAgICAgZW5jb2RlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgICBsZW5ndGhUeXBlLmVuY29kZS5ieXRlcyA9IGxlbmd0aEJ5dGVzO1xuICAgICAgICB9KSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHR5cGUgPSBidWZmZXIobGVuZ3RoVHlwZSk7XG4gICAgICB0eXBlLmVuY29kZShidWYsIHdzdHJlYW0pO1xuXG4gICAgICBleHBlY3QobGVuZ3RoVHlwZS5lbmNvZGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdChsZW5ndGhUeXBlLmVuY29kZSkudG9CZUNhbGxlZFdpdGgobGVuZ3RoLCB3c3RyZWFtKTtcbiAgICAgIGV4cGVjdCh3cml0ZUJ1ZmZlcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgZXhwZWN0KHdyaXRlQnVmZmVyKS50b0JlQ2FsbGVkV2l0aChidWYpO1xuICAgICAgZXhwZWN0KHR5cGUuZW5jb2RlLmJ5dGVzKS50b0JlKGxlbmd0aCArIGxlbmd0aEJ5dGVzKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlY29kZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IDI7XG4gICAgICBjb25zdCBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKTtcblxuICAgICAgY29uc3QgcmVhZEJ1ZmZlciA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gYnVmKTtcbiAgICAgIGNvbnN0IGxlbmd0aEJ5dGVzID0gNTtcblxuICAgICAgY29uc3QgcnN0cmVhbSA9IHtcbiAgICAgICAgcmVhZEJ1ZmZlcixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGxlbmd0aFR5cGUgPSB7XG4gICAgICAgIGRlY29kZTogKCkgPT4gbGVuZ3RoLFxuICAgICAgICBlbmNvZGUoKSB7fSxcbiAgICAgIH07XG5cbiAgICAgIGxlbmd0aFR5cGUuZGVjb2RlLmJ5dGVzID0gbGVuZ3RoQnl0ZXM7XG5cbiAgICAgIGNvbnN0IHR5cGUgPSBidWZmZXIobGVuZ3RoVHlwZSk7XG5cbiAgICAgIGV4cGVjdCh0eXBlLmRlY29kZShyc3RyZWFtKSkudG9CZShidWYpO1xuICAgICAgZXhwZWN0KHJlYWRCdWZmZXIpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdChyZWFkQnVmZmVyKS50b0JlQ2FsbGVkV2l0aChsZW5ndGgpO1xuICAgICAgZXhwZWN0KHR5cGUuZGVjb2RlLmJ5dGVzKS50b0JlKGJ1Zi5sZW5ndGggKyBsZW5ndGhCeXRlcyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdlbmNvZGluZ0xlbmd0aCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IDU7XG4gICAgICBjb25zdCB0eXBlTGVuZ3RoID0gMjtcbiAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpO1xuXG4gICAgICBjb25zdCBsZW5ndGhUeXBlID0ge1xuICAgICAgICBlbmNvZGUoKSB7fSxcbiAgICAgICAgZGVjb2RlKCkge30sXG4gICAgICAgIGVuY29kaW5nTGVuZ3RoKCkge1xuICAgICAgICAgIHJldHVybiB0eXBlTGVuZ3RoO1xuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdHlwZSA9IGJ1ZmZlcihsZW5ndGhUeXBlKTtcblxuICAgICAgZXhwZWN0KHR5cGUuZW5jb2RpbmdMZW5ndGgoYnVmKSkudG9CZSh0eXBlTGVuZ3RoICsgbGVuZ3RoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FyZ3VtZW50IGBsZW5ndGhgIGlzIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RlY29kZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IDI7XG4gICAgICBjb25zdCBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKTtcblxuICAgICAgY29uc3QgcmVhZEJ1ZmZlciA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gYnVmKTtcblxuICAgICAgY29uc3QgcnN0cmVhbSA9IHtcbiAgICAgICAgcmVhZEJ1ZmZlcixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBsZW5ndGgpO1xuICAgICAgY29uc3QgdHlwZSA9IGJ1ZmZlcihjYWxsYmFjayk7XG5cbiAgICAgIGV4cGVjdCh0eXBlLmRlY29kZShyc3RyZWFtKSkudG9CZShidWYpO1xuICAgICAgZXhwZWN0KHJlYWRCdWZmZXIpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdChyZWFkQnVmZmVyKS50b0JlQ2FsbGVkV2l0aChsZW5ndGgpO1xuICAgICAgZXhwZWN0KGNhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3QodHlwZS5kZWNvZGUuYnl0ZXMpLnRvQmUobGVuZ3RoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2VuY29kZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHdyaXRlQnVmZmVyID0gamVzdC5mbigpO1xuXG4gICAgICBjb25zdCB3c3RyZWFtID0ge1xuICAgICAgICB3cml0ZUJ1ZmZlcixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGxlbmd0aCA9IDI7XG4gICAgICBjb25zdCBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKTtcblxuICAgICAgY29uc3QgY2FsbGJhY2sgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IGxlbmd0aCk7XG4gICAgICBjb25zdCB0eXBlID0gYnVmZmVyKGNhbGxiYWNrKTtcblxuICAgICAgdHlwZS5lbmNvZGUoYnVmLCB3c3RyZWFtKTtcblxuICAgICAgZXhwZWN0KHdyaXRlQnVmZmVyKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3Qod3JpdGVCdWZmZXIpLnRvQmVDYWxsZWRXaXRoKGJ1Zik7XG4gICAgICBleHBlY3QoY2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdCh0eXBlLmVuY29kZS5ieXRlcykudG9CZShsZW5ndGgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZW5jb2RpbmdMZW5ndGgnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsZW5ndGggPSA1O1xuXG4gICAgICBjb25zdCB0eXBlID0gYnVmZmVyKCgpID0+IGxlbmd0aCAqIDIpO1xuICAgICAgZXhwZWN0KHR5cGUuZW5jb2RpbmdMZW5ndGgoQnVmZmVyLmFsbG9jKGxlbmd0aCkpKS50b0JlKGxlbmd0aCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhcmd1bWVudCBgbGVuZ3RoYCBpcyBudWxsJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RlY29kZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0LCA1LCAwLCA1LCA2LCA3LCA4XSk7XG4gICAgICBjb25zdCBsZW5ndGggPSBidWYuaW5kZXhPZigwKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkID0gYnVmLnNsaWNlKDAsIGxlbmd0aCk7XG5cbiAgICAgIGNvbnN0IHJzdHJlYW0gPSB7XG4gICAgICAgIHJlYWRCdWZmZXI6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oc2l6ZSA9PiBidWYuc2xpY2UoMCwgc2l6ZSkpLFxuICAgICAgICBpbmRleE9mOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKGJ5dGUgPT4gYnVmLmluZGV4T2YoYnl0ZSkpLFxuICAgICAgICBjb25zdW1lOiBqZXN0LmZuKCksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB0eXBlID0gYnVmZmVyKG51bGwpO1xuXG4gICAgICBleHBlY3QodHlwZS5kZWNvZGUocnN0cmVhbSkpLnRvRXF1YWwoZXhwZWN0ZWQpO1xuICAgICAgZXhwZWN0KHR5cGUuZGVjb2RlLmJ5dGVzKS50b0VxdWFsKGxlbmd0aCArIDEpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZW5jb2RlJywgKCkgPT4ge1xuICAgICAgY29uc3QgYnVmID0gQnVmZmVyLmZyb20oWzEsIDIsIDMsIDQsIDVdKTtcbiAgICAgIGNvbnN0IHdyaXRlQnVmZmVyID0gamVzdC5mbigpO1xuICAgICAgY29uc3Qgd3JpdGVVSW50OCA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IHdzdHJlYW0gPSB7XG4gICAgICAgIHdyaXRlQnVmZmVyLFxuICAgICAgICB3cml0ZVVJbnQ4LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdHlwZSA9IGJ1ZmZlcihudWxsKTtcblxuICAgICAgdHlwZS5lbmNvZGUoYnVmLCB3c3RyZWFtKTtcblxuICAgICAgZXhwZWN0KHdyaXRlQnVmZmVyKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3Qod3JpdGVCdWZmZXIpLnRvQmVDYWxsZWRXaXRoKGJ1Zik7XG4gICAgICBleHBlY3Qod3JpdGVVSW50OCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgZXhwZWN0KHdyaXRlVUludDgpLnRvQmVDYWxsZWRXaXRoKDApO1xuICAgICAgZXhwZWN0KHR5cGUuZW5jb2RlLmJ5dGVzKS50b0JlKGJ1Zi5sZW5ndGggKyAxKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2VuY29kaW5nTGVuZ3RoJywgKCkgPT4ge1xuICAgICAgY29uc3QgYnVmID0gQnVmZmVyLmZyb20oWzEsIDIsIDMsIDQsIDVdKTtcbiAgICAgIGNvbnN0IHR5cGUgPSBidWZmZXIobnVsbCk7XG5cbiAgICAgIGV4cGVjdCh0eXBlLmVuY29kaW5nTGVuZ3RoKGJ1ZikpLnRvQmUoYnVmLmxlbmd0aCArIDEpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgYmUgYWJsZSB0byBlbmNvZGUgQmluYXJ5U3RyZWFtJywgKCkgPT4ge1xuICAgIGplc3QudW5tb2NrKCdsaWIvYmluYXJ5LXN0cmVhbScpO1xuXG4gICAgY29uc3QgYnVmID0gbmV3IEJpbmFyeVN0cmVhbSgpO1xuICAgIGJ1Zi53cml0ZUJ1ZmZlcihCdWZmZXIuZnJvbShbMSwgMl0pKTtcbiAgICBidWYud3JpdGVCdWZmZXIoQnVmZmVyLmZyb20oWzMsIDRdKSk7XG5cbiAgICBjb25zdCB3c3RyZWFtID0gbmV3IEJpbmFyeVN0cmVhbSgpO1xuICAgIGNvbnN0IHR5cGUgPSBidWZmZXIobnVsbCk7XG5cbiAgICB0eXBlLmVuY29kZShidWYsIHdzdHJlYW0pO1xuXG4gICAgZXhwZWN0KHdzdHJlYW0uc2xpY2UoKSkudG9FcXVhbChCdWZmZXIuZnJvbShbMSwgMiwgMywgNCwgM10pKTtcbiAgICBleHBlY3QodHlwZS5lbmNvZGUuYnl0ZXMpLnRvQmUoYnVmLmxlbmd0aCArIDEpO1xuICB9KTtcbn0pO1xuIl19