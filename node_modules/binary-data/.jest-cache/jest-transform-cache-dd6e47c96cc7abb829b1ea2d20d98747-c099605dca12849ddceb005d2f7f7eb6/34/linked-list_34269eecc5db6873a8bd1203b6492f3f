1c5d0425e2294a94cd0f3099d23079dd
'use strict';

const LinkedList = require('internal/linked-list');

test('push(buf)', () => {
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9, 10]);
  const list = new LinkedList();

  list.push(buf1);
  list.push(buf2);

  expect(list.length).toEqual(buf1.length + buf2.length);
  expect(list.count).toEqual(2);
  expect(list.first).toEqual(buf1);
  expect(list.last).toEqual(buf2);
  expect(list.head.next).toEqual(list.tail);
});

test('unshift(buf)', () => {
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9, 10]);
  const list = new LinkedList();

  list.unshift(buf1);
  list.unshift(buf2);

  expect(list.length).toEqual(buf1.length + buf2.length);
  expect(list.count).toEqual(2);
  expect(list.first).toEqual(buf2);
  expect(list.last).toEqual(buf1);
  expect(list.head.next).toEqual(list.tail);
});

test('shift(buf)', () => {
  const buf1 = Buffer.from([1, 2, 3, 4, 5]);
  const buf2 = Buffer.from([6, 7, 8, 9, 10]);
  const list = new LinkedList();

  list.push(buf1);
  list.push(buf2);

  expect(list.shift()).toEqual(buf1);
  expect(list.count).toEqual(1);
  expect(list.length).toEqual(buf2.length);
  expect(list.first).toEqual(buf2);
  expect(list.last).toEqual(buf2);

  expect(list.shift()).toEqual(buf2);
  expect(list.count).toEqual(0);
  expect(list.length).toEqual(0);
  expect(list.first).toEqual(null);
  expect(list.last).toEqual(null);
});

test('slice() the whole chunk', () => {
  const list = new LinkedList();
  const buf1 = Buffer.from([1, 2, 3, 4]);
  const buf2 = Buffer.from([5, 6, 7, 8]);
  const buf3 = Buffer.from([9, 10, 11, 12]);

  list.push(buf1);
  list.push(buf2);
  list.push(buf3);

  const sublist = list.slice(0, buf1.length);
  expect(sublist.length).toEqual(buf1.length);
  expect(sublist.count).toEqual(1);
  expect(sublist.first).toBe(buf1);
  expect(sublist.last).toBe(buf1);
});

test('slice() first subset of a chunk', () => {
  const list = new LinkedList();
  const buf1 = Buffer.from([1, 2, 3, 4]);
  const buf2 = Buffer.from([5, 6, 7, 8]);
  const buf3 = Buffer.from([9, 10, 11, 12]);

  list.push(buf1);
  list.push(buf2);
  list.push(buf3);

  const length = buf2.length - 1;
  const sublist = list.slice(buf1.length, buf1.length + length);

  expect(sublist.length).toEqual(length);
  expect(sublist.count).toEqual(1);
  expect(sublist.first).toEqual(buf2.slice(0, length));
  expect(sublist.last).toEqual(buf2.slice(0, length));
});

test('slice() last subset of a chunk', () => {
  const list = new LinkedList();
  const buf1 = Buffer.from([1, 2, 3, 4]);
  const buf2 = Buffer.from([5, 6, 7, 8]);
  const buf3 = Buffer.from([9, 10, 11, 12]);

  list.push(buf1);
  list.push(buf2);
  list.push(buf3);

  const length = buf2.length - 1;
  const start = buf1.length + 1;
  const sublist = list.slice(start, start + length);

  expect(sublist.length).toEqual(length);
  expect(sublist.count).toEqual(1);
  expect(sublist.first).toEqual(buf2.slice(1, buf2.length));
  expect(sublist.last).toEqual(buf2.slice(1, buf2.length));
});

test('slice() multiple chunks by borders', () => {
  const list = new LinkedList();
  const buf1 = Buffer.from([1, 2, 3, 4]);
  const buf2 = Buffer.from([5, 6, 7, 8]);
  const buf3 = Buffer.from([9, 10, 11, 12]);

  list.push(buf1);
  list.push(buf2);
  list.push(buf3);

  const length = buf1.length + buf2.length;
  const sublist = list.slice(0, length);

  expect(sublist.length).toEqual(length);
  expect(sublist.count).toEqual(2);
  expect(sublist.first).toBe(buf1);
  expect(sublist.last).toBe(buf2);
});

test('slice() subset of multiple chunks', () => {
  const list = new LinkedList();
  const buf1 = Buffer.from([1, 2, 3, 4]);
  const buf2 = Buffer.from([5, 6, 7, 8]);
  const buf3 = Buffer.from([9, 10, 11, 12]);

  list.push(buf1);
  list.push(buf2);
  list.push(buf3);

  const length = 4;
  const start = 2;
  const sublist = list.slice(start, start + length);

  expect(sublist.length).toEqual(length);
  expect(sublist.count).toEqual(2);
  expect(sublist.first).toEqual(buf1.slice(2));
  expect(sublist.last).toEqual(buf2.slice(0, 2));
});

test('slice() subset of multiple chunks with the whole chunk', () => {
  const list = new LinkedList();
  const buf1 = Buffer.from([1, 2, 3, 4]);
  const buf2 = Buffer.from([5, 6, 7, 8]);
  const buf3 = Buffer.from([9, 10, 11, 12]);

  list.push(buf1);
  list.push(buf2);
  list.push(buf3);

  const length = 8;
  const start = 2;
  const sublist = list.slice(start, start + length);

  expect(sublist.length).toEqual(length);
  expect(sublist.count).toEqual(3);
  expect(sublist.first).toEqual(buf1.slice(2));
  expect(sublist.head.next.buffer).toBe(buf2);
  expect(sublist.last).toEqual(buf3.slice(0, 2));
});

test('slice() duplicate', () => {
  const list = new LinkedList();
  const buf1 = Buffer.from([1, 2]);
  const buf2 = Buffer.from([5, 6, 7]);
  const buf3 = Buffer.from([9, 10, 11, 12]);

  list.push(buf1);
  list.push(buf2);
  list.push(buf3);

  const length = buf1.length + buf2.length + buf3.length;
  const sublist = list.slice(0, length);

  expect(sublist.length).toEqual(list.length);
  expect(sublist.count).toEqual(list.count);
  expect(sublist.first).toBe(list.first);
  expect(sublist.head.next.buffer).toBe(buf2);
  expect(sublist.last).toBe(list.last);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpbmtlZC1saXN0LmpzIl0sIm5hbWVzIjpbIkxpbmtlZExpc3QiLCJyZXF1aXJlIiwidGVzdCIsImJ1ZjEiLCJCdWZmZXIiLCJmcm9tIiwiYnVmMiIsImxpc3QiLCJwdXNoIiwiZXhwZWN0IiwibGVuZ3RoIiwidG9FcXVhbCIsImNvdW50IiwiZmlyc3QiLCJsYXN0IiwiaGVhZCIsIm5leHQiLCJ0YWlsIiwidW5zaGlmdCIsInNoaWZ0IiwiYnVmMyIsInN1Ymxpc3QiLCJzbGljZSIsInRvQmUiLCJzdGFydCIsImJ1ZmZlciJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsYUFBYUMsUUFBUSxzQkFBUixDQUFuQjs7QUFFQUMsS0FBSyxXQUFMLEVBQWtCLE1BQU07QUFDdEIsUUFBTUMsT0FBT0MsT0FBT0MsSUFBUCxDQUFZLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVixFQUFhLENBQWIsQ0FBWixDQUFiO0FBQ0EsUUFBTUMsT0FBT0YsT0FBT0MsSUFBUCxDQUFZLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVixFQUFhLEVBQWIsQ0FBWixDQUFiO0FBQ0EsUUFBTUUsT0FBTyxJQUFJUCxVQUFKLEVBQWI7O0FBRUFPLE9BQUtDLElBQUwsQ0FBVUwsSUFBVjtBQUNBSSxPQUFLQyxJQUFMLENBQVVGLElBQVY7O0FBRUFHLFNBQU9GLEtBQUtHLE1BQVosRUFBb0JDLE9BQXBCLENBQTRCUixLQUFLTyxNQUFMLEdBQWNKLEtBQUtJLE1BQS9DO0FBQ0FELFNBQU9GLEtBQUtLLEtBQVosRUFBbUJELE9BQW5CLENBQTJCLENBQTNCO0FBQ0FGLFNBQU9GLEtBQUtNLEtBQVosRUFBbUJGLE9BQW5CLENBQTJCUixJQUEzQjtBQUNBTSxTQUFPRixLQUFLTyxJQUFaLEVBQWtCSCxPQUFsQixDQUEwQkwsSUFBMUI7QUFDQUcsU0FBT0YsS0FBS1EsSUFBTCxDQUFVQyxJQUFqQixFQUF1QkwsT0FBdkIsQ0FBK0JKLEtBQUtV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QUFKLEVBQVEsRUFBUixFQUFZLEVBQVosQ0FBWixDQUFiOztBQUVBRSxPQUFLQyxJQUFMLENBQVVMLElBQVY7QUFDQUksT0FBS0MsSUFBTCxDQUFVRixJQUFWO0FBQ0FDLE9BQUtDLElBQUwsQ0FBVVksSUFBVjs7QUFFQSxRQUFNVixTQUFTUCxLQUFLTyxNQUFMLEdBQWNKLEtBQUtJLE1BQW5CLEdBQTRCVSxLQUFLVixNQUFoRDtBQUNBLFFBQU1XLFVBQVVkLEtBQUtlLEtBQUwsQ0FBVyxDQUFYLEVBQWNaLE1BQWQsQ0FBaEI7O0FBRUFELFNBQU9ZLFFBQVFYLE1BQWYsRUFBdUJDLE9BQXZCLENBQStCSixLQUFLRyxNQUFwQztBQUNBRCxTQUFPWSxRQUFRVCxLQUFmLEVBQXNCRCxPQUF0QixDQUE4QkosS0FBS0ssS0FBbkM7QUFDQUgsU0FBT1ksUUFBUVIsS0FBZixFQUFzQlUsSUFBdEIsQ0FBMkJoQixLQUFLTSxLQUFoQztBQUNBSixTQUFPWSxRQUFRTixJQUFSLENBQWFDLElBQWIsQ0FBa0JTLE1BQXpCLEVBQWlDRixJQUFqQyxDQUFzQ2pCLElBQXRDO0FBQ0FHLFNBQU9ZLFFBQVFQLElBQWYsRUFBcUJTLElBQXJCLENBQTBCaEIsS0FBS08sSUFBL0I7QUFDRCxDQWxCRCIsImZpbGUiOiJsaW5rZWQtbGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgTGlua2VkTGlzdCA9IHJlcXVpcmUoJ2ludGVybmFsL2xpbmtlZC1saXN0Jyk7XG5cbnRlc3QoJ3B1c2goYnVmKScsICgpID0+IHtcbiAgY29uc3QgYnVmMSA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0LCA1XSk7XG4gIGNvbnN0IGJ1ZjIgPSBCdWZmZXIuZnJvbShbNiwgNywgOCwgOSwgMTBdKTtcbiAgY29uc3QgbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG5cbiAgbGlzdC5wdXNoKGJ1ZjEpO1xuICBsaXN0LnB1c2goYnVmMik7XG5cbiAgZXhwZWN0KGxpc3QubGVuZ3RoKS50b0VxdWFsKGJ1ZjEubGVuZ3RoICsgYnVmMi5sZW5ndGgpO1xuICBleHBlY3QobGlzdC5jb3VudCkudG9FcXVhbCgyKTtcbiAgZXhwZWN0KGxpc3QuZmlyc3QpLnRvRXF1YWwoYnVmMSk7XG4gIGV4cGVjdChsaXN0Lmxhc3QpLnRvRXF1YWwoYnVmMik7XG4gIGV4cGVjdChsaXN0LmhlYWQubmV4dCkudG9FcXVhbChsaXN0LnRhaWwpO1xufSk7XG5cbnRlc3QoJ3Vuc2hpZnQoYnVmKScsICgpID0+IHtcbiAgY29uc3QgYnVmMSA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0LCA1XSk7XG4gIGNvbnN0IGJ1ZjIgPSBCdWZmZXIuZnJvbShbNiwgNywgOCwgOSwgMTBdKTtcbiAgY29uc3QgbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG5cbiAgbGlzdC51bnNoaWZ0KGJ1ZjEpO1xuICBsaXN0LnVuc2hpZnQoYnVmMik7XG5cbiAgZXhwZWN0KGxpc3QubGVuZ3RoKS50b0VxdWFsKGJ1ZjEubGVuZ3RoICsgYnVmMi5sZW5ndGgpO1xuICBleHBlY3QobGlzdC5jb3VudCkudG9FcXVhbCgyKTtcbiAgZXhwZWN0KGxpc3QuZmlyc3QpLnRvRXF1YWwoYnVmMik7XG4gIGV4cGVjdChsaXN0Lmxhc3QpLnRvRXF1YWwoYnVmMSk7XG4gIGV4cGVjdChsaXN0LmhlYWQubmV4dCkudG9FcXVhbChsaXN0LnRhaWwpO1xufSk7XG5cbnRlc3QoJ3NoaWZ0KGJ1ZiknLCAoKSA9PiB7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMiwgMywgNCwgNV0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzYsIDcsIDgsIDksIDEwXSk7XG4gIGNvbnN0IGxpc3QgPSBuZXcgTGlua2VkTGlzdCgpO1xuXG4gIGxpc3QucHVzaChidWYxKTtcbiAgbGlzdC5wdXNoKGJ1ZjIpO1xuXG4gIGV4cGVjdChsaXN0LnNoaWZ0KCkpLnRvRXF1YWwoYnVmMSk7XG4gIGV4cGVjdChsaXN0LmNvdW50KS50b0VxdWFsKDEpO1xuICBleHBlY3QobGlzdC5sZW5ndGgpLnRvRXF1YWwoYnVmMi5sZW5ndGgpO1xuICBleHBlY3QobGlzdC5maXJzdCkudG9FcXVhbChidWYyKTtcbiAgZXhwZWN0KGxpc3QubGFzdCkudG9FcXVhbChidWYyKTtcblxuICBleHBlY3QobGlzdC5zaGlmdCgpKS50b0VxdWFsKGJ1ZjIpO1xuICBleHBlY3QobGlzdC5jb3VudCkudG9FcXVhbCgwKTtcbiAgZXhwZWN0KGxpc3QubGVuZ3RoKS50b0VxdWFsKDApO1xuICBleHBlY3QobGlzdC5maXJzdCkudG9FcXVhbChudWxsKTtcbiAgZXhwZWN0KGxpc3QubGFzdCkudG9FcXVhbChudWxsKTtcbn0pO1xuXG50ZXN0KCdzbGljZSgpIHRoZSB3aG9sZSBjaHVuaycsICgpID0+IHtcbiAgY29uc3QgbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMiwgMywgNF0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzUsIDYsIDcsIDhdKTtcbiAgY29uc3QgYnVmMyA9IEJ1ZmZlci5mcm9tKFs5LCAxMCwgMTEsIDEyXSk7XG5cbiAgbGlzdC5wdXNoKGJ1ZjEpO1xuICBsaXN0LnB1c2goYnVmMik7XG4gIGxpc3QucHVzaChidWYzKTtcblxuICBjb25zdCBzdWJsaXN0ID0gbGlzdC5zbGljZSgwLCBidWYxLmxlbmd0aCk7XG4gIGV4cGVjdChzdWJsaXN0Lmxlbmd0aCkudG9FcXVhbChidWYxLmxlbmd0aCk7XG4gIGV4cGVjdChzdWJsaXN0LmNvdW50KS50b0VxdWFsKDEpO1xuICBleHBlY3Qoc3VibGlzdC5maXJzdCkudG9CZShidWYxKTtcbiAgZXhwZWN0KHN1Ymxpc3QubGFzdCkudG9CZShidWYxKTtcbn0pO1xuXG50ZXN0KCdzbGljZSgpIGZpcnN0IHN1YnNldCBvZiBhIGNodW5rJywgKCkgPT4ge1xuICBjb25zdCBsaXN0ID0gbmV3IExpbmtlZExpc3QoKTtcbiAgY29uc3QgYnVmMSA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0XSk7XG4gIGNvbnN0IGJ1ZjIgPSBCdWZmZXIuZnJvbShbNSwgNiwgNywgOF0pO1xuICBjb25zdCBidWYzID0gQnVmZmVyLmZyb20oWzksIDEwLCAxMSwgMTJdKTtcblxuICBsaXN0LnB1c2goYnVmMSk7XG4gIGxpc3QucHVzaChidWYyKTtcbiAgbGlzdC5wdXNoKGJ1ZjMpO1xuXG4gIGNvbnN0IGxlbmd0aCA9IGJ1ZjIubGVuZ3RoIC0gMTtcbiAgY29uc3Qgc3VibGlzdCA9IGxpc3Quc2xpY2UoYnVmMS5sZW5ndGgsIGJ1ZjEubGVuZ3RoICsgbGVuZ3RoKTtcblxuICBleHBlY3Qoc3VibGlzdC5sZW5ndGgpLnRvRXF1YWwobGVuZ3RoKTtcbiAgZXhwZWN0KHN1Ymxpc3QuY291bnQpLnRvRXF1YWwoMSk7XG4gIGV4cGVjdChzdWJsaXN0LmZpcnN0KS50b0VxdWFsKGJ1ZjIuc2xpY2UoMCwgbGVuZ3RoKSk7XG4gIGV4cGVjdChzdWJsaXN0Lmxhc3QpLnRvRXF1YWwoYnVmMi5zbGljZSgwLCBsZW5ndGgpKTtcbn0pO1xuXG50ZXN0KCdzbGljZSgpIGxhc3Qgc3Vic2V0IG9mIGEgY2h1bmsnLCAoKSA9PiB7XG4gIGNvbnN0IGxpc3QgPSBuZXcgTGlua2VkTGlzdCgpO1xuICBjb25zdCBidWYxID0gQnVmZmVyLmZyb20oWzEsIDIsIDMsIDRdKTtcbiAgY29uc3QgYnVmMiA9IEJ1ZmZlci5mcm9tKFs1LCA2LCA3LCA4XSk7XG4gIGNvbnN0IGJ1ZjMgPSBCdWZmZXIuZnJvbShbOSwgMTAsIDExLCAxMl0pO1xuXG4gIGxpc3QucHVzaChidWYxKTtcbiAgbGlzdC5wdXNoKGJ1ZjIpO1xuICBsaXN0LnB1c2goYnVmMyk7XG5cbiAgY29uc3QgbGVuZ3RoID0gYnVmMi5sZW5ndGggLSAxO1xuICBjb25zdCBzdGFydCA9IGJ1ZjEubGVuZ3RoICsgMTtcbiAgY29uc3Qgc3VibGlzdCA9IGxpc3Quc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKTtcblxuICBleHBlY3Qoc3VibGlzdC5sZW5ndGgpLnRvRXF1YWwobGVuZ3RoKTtcbiAgZXhwZWN0KHN1Ymxpc3QuY291bnQpLnRvRXF1YWwoMSk7XG4gIGV4cGVjdChzdWJsaXN0LmZpcnN0KS50b0VxdWFsKGJ1ZjIuc2xpY2UoMSwgYnVmMi5sZW5ndGgpKTtcbiAgZXhwZWN0KHN1Ymxpc3QubGFzdCkudG9FcXVhbChidWYyLnNsaWNlKDEsIGJ1ZjIubGVuZ3RoKSk7XG59KTtcblxudGVzdCgnc2xpY2UoKSBtdWx0aXBsZSBjaHVua3MgYnkgYm9yZGVycycsICgpID0+IHtcbiAgY29uc3QgbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMiwgMywgNF0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzUsIDYsIDcsIDhdKTtcbiAgY29uc3QgYnVmMyA9IEJ1ZmZlci5mcm9tKFs5LCAxMCwgMTEsIDEyXSk7XG5cbiAgbGlzdC5wdXNoKGJ1ZjEpO1xuICBsaXN0LnB1c2goYnVmMik7XG4gIGxpc3QucHVzaChidWYzKTtcblxuICBjb25zdCBsZW5ndGggPSBidWYxLmxlbmd0aCArIGJ1ZjIubGVuZ3RoO1xuICBjb25zdCBzdWJsaXN0ID0gbGlzdC5zbGljZSgwLCBsZW5ndGgpO1xuXG4gIGV4cGVjdChzdWJsaXN0Lmxlbmd0aCkudG9FcXVhbChsZW5ndGgpO1xuICBleHBlY3Qoc3VibGlzdC5jb3VudCkudG9FcXVhbCgyKTtcbiAgZXhwZWN0KHN1Ymxpc3QuZmlyc3QpLnRvQmUoYnVmMSk7XG4gIGV4cGVjdChzdWJsaXN0Lmxhc3QpLnRvQmUoYnVmMik7XG59KTtcblxudGVzdCgnc2xpY2UoKSBzdWJzZXQgb2YgbXVsdGlwbGUgY2h1bmtzJywgKCkgPT4ge1xuICBjb25zdCBsaXN0ID0gbmV3IExpbmtlZExpc3QoKTtcbiAgY29uc3QgYnVmMSA9IEJ1ZmZlci5mcm9tKFsxLCAyLCAzLCA0XSk7XG4gIGNvbnN0IGJ1ZjIgPSBCdWZmZXIuZnJvbShbNSwgNiwgNywgOF0pO1xuICBjb25zdCBidWYzID0gQnVmZmVyLmZyb20oWzksIDEwLCAxMSwgMTJdKTtcblxuICBsaXN0LnB1c2goYnVmMSk7XG4gIGxpc3QucHVzaChidWYyKTtcbiAgbGlzdC5wdXNoKGJ1ZjMpO1xuXG4gIGNvbnN0IGxlbmd0aCA9IDQ7XG4gIGNvbnN0IHN0YXJ0ID0gMjtcbiAgY29uc3Qgc3VibGlzdCA9IGxpc3Quc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKTtcblxuICBleHBlY3Qoc3VibGlzdC5sZW5ndGgpLnRvRXF1YWwobGVuZ3RoKTtcbiAgZXhwZWN0KHN1Ymxpc3QuY291bnQpLnRvRXF1YWwoMik7XG4gIGV4cGVjdChzdWJsaXN0LmZpcnN0KS50b0VxdWFsKGJ1ZjEuc2xpY2UoMikpO1xuICBleHBlY3Qoc3VibGlzdC5sYXN0KS50b0VxdWFsKGJ1ZjIuc2xpY2UoMCwgMikpO1xufSk7XG5cbnRlc3QoJ3NsaWNlKCkgc3Vic2V0IG9mIG11bHRpcGxlIGNodW5rcyB3aXRoIHRoZSB3aG9sZSBjaHVuaycsICgpID0+IHtcbiAgY29uc3QgbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMiwgMywgNF0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzUsIDYsIDcsIDhdKTtcbiAgY29uc3QgYnVmMyA9IEJ1ZmZlci5mcm9tKFs5LCAxMCwgMTEsIDEyXSk7XG5cbiAgbGlzdC5wdXNoKGJ1ZjEpO1xuICBsaXN0LnB1c2goYnVmMik7XG4gIGxpc3QucHVzaChidWYzKTtcblxuICBjb25zdCBsZW5ndGggPSA4O1xuICBjb25zdCBzdGFydCA9IDI7XG4gIGNvbnN0IHN1Ymxpc3QgPSBsaXN0LnNsaWNlKHN0YXJ0LCBzdGFydCArIGxlbmd0aCk7XG5cbiAgZXhwZWN0KHN1Ymxpc3QubGVuZ3RoKS50b0VxdWFsKGxlbmd0aCk7XG4gIGV4cGVjdChzdWJsaXN0LmNvdW50KS50b0VxdWFsKDMpO1xuICBleHBlY3Qoc3VibGlzdC5maXJzdCkudG9FcXVhbChidWYxLnNsaWNlKDIpKTtcbiAgZXhwZWN0KHN1Ymxpc3QuaGVhZC5uZXh0LmJ1ZmZlcikudG9CZShidWYyKTtcbiAgZXhwZWN0KHN1Ymxpc3QubGFzdCkudG9FcXVhbChidWYzLnNsaWNlKDAsIDIpKTtcbn0pO1xuXG50ZXN0KCdzbGljZSgpIGR1cGxpY2F0ZScsICgpID0+IHtcbiAgY29uc3QgbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG4gIGNvbnN0IGJ1ZjEgPSBCdWZmZXIuZnJvbShbMSwgMl0pO1xuICBjb25zdCBidWYyID0gQnVmZmVyLmZyb20oWzUsIDYsIDddKTtcbiAgY29uc3QgYnVmMyA9IEJ1ZmZlci5mcm9tKFs5LCAxMCwgMTEsIDEyXSk7XG5cbiAgbGlzdC5wdXNoKGJ1ZjEpO1xuICBsaXN0LnB1c2goYnVmMik7XG4gIGxpc3QucHVzaChidWYzKTtcblxuICBjb25zdCBsZW5ndGggPSBidWYxLmxlbmd0aCArIGJ1ZjIubGVuZ3RoICsgYnVmMy5sZW5ndGg7XG4gIGNvbnN0IHN1Ymxpc3QgPSBsaXN0LnNsaWNlKDAsIGxlbmd0aCk7XG5cbiAgZXhwZWN0KHN1Ymxpc3QubGVuZ3RoKS50b0VxdWFsKGxpc3QubGVuZ3RoKTtcbiAgZXhwZWN0KHN1Ymxpc3QuY291bnQpLnRvRXF1YWwobGlzdC5jb3VudCk7XG4gIGV4cGVjdChzdWJsaXN0LmZpcnN0KS50b0JlKGxpc3QuZmlyc3QpO1xuICBleHBlY3Qoc3VibGlzdC5oZWFkLm5leHQuYnVmZmVyKS50b0JlKGJ1ZjIpO1xuICBleHBlY3Qoc3VibGlzdC5sYXN0KS50b0JlKGxpc3QubGFzdCk7XG59KTtcbiJdfQ==