d8741655ff26d4ec4ed9afd78353dea8
'use strict';

/* istanbul ignore next */var cov_1foi4dgh3a = function () {
  var path = '/home/dtsvet/develop/projects/binary-data/src/index.js',
      hash = 'b24e7dbc9369c34db829b84022d18ab8ce8c7f17',
      Function = function () {}.constructor,
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/home/dtsvet/develop/projects/binary-data/src/index.js',
    statementMap: {
      '0': {
        start: {
          line: 28,
          column: 0
        },
        end: {
          line: 30,
          column: 1
        }
      },
      '1': {
        start: {
          line: 29,
          column: 2
        },
        end: {
          line: 29,
          column: 30
        }
      },
      '2': {
        start: {
          line: 46,
          column: 2
        },
        end: {
          line: 46,
          column: 27
        }
      },
      '3': {
        start: {
          line: 47,
          column: 2
        },
        end: {
          line: 47,
          column: 16
        }
      },
      '4': {
        start: {
          line: 59,
          column: 2
        },
        end: {
          line: 61,
          column: 3
        }
      },
      '5': {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 60,
          column: 25
        }
      },
      '6': {
        start: {
          line: 69,
          column: 2
        },
        end: {
          line: 69,
          column: 27
        }
      },
      '7': {
        start: {
          line: 71,
          column: 2
        },
        end: {
          line: 73,
          column: 3
        }
      },
      '8': {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 31
        }
      },
      '9': {
        start: {
          line: 75,
          column: 2
        },
        end: {
          line: 75,
          column: 16
        }
      },
      '10': {
        start: {
          line: 85,
          column: 2
        },
        end: {
          line: 94,
          column: 3
        }
      },
      '11': {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 86,
          column: 39
        }
      },
      '12': {
        start: {
          line: 89,
          column: 4
        },
        end: {
          line: 89,
          column: 29
        }
      },
      '13': {
        start: {
          line: 91,
          column: 4
        },
        end: {
          line: 91,
          column: 18
        }
      },
      '14': {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 93,
          column: 14
        }
      },
      '15': {
        start: {
          line: 104,
          column: 2
        },
        end: {
          line: 104,
          column: 21
        }
      },
      '16': {
        start: {
          line: 106,
          column: 2
        },
        end: {
          line: 122,
          column: 3
        }
      },
      '17': {
        start: {
          line: 107,
          column: 4
        },
        end: {
          line: 113,
          column: 5
        }
      },
      '18': {
        start: {
          line: 111,
          column: 6
        },
        end: {
          line: 111,
          column: 27
        }
      },
      '19': {
        start: {
          line: 112,
          column: 6
        },
        end: {
          line: 112,
          column: 22
        }
      },
      '20': {
        start: {
          line: 115,
          column: 4
        },
        end: {
          line: 115,
          column: 9
        }
      },
      '21': {
        start: {
          line: 117,
          column: 4
        },
        end: {
          line: 121,
          column: 5
        }
      },
      '22': {
        start: {
          line: 118,
          column: 6
        },
        end: {
          line: 118,
          column: 11
        }
      },
      '23': {
        start: {
          line: 120,
          column: 6
        },
        end: {
          line: 120,
          column: 16
        }
      },
      '24': {
        start: {
          line: 125,
          column: 0
        },
        end: {
          line: 139,
          column: 2
        }
      }
    },
    fnMap: {
      '0': {
        name: 'createEncodeStream',
        decl: {
          start: {
            line: 39,
            column: 9
          },
          end: {
            line: 39,
            column: 27
          }
        },
        loc: {
          start: {
            line: 39,
            column: 36
          },
          end: {
            line: 48,
            column: 1
          }
        },
        line: 39
      },
      '1': {
        name: 'createDecodeStream',
        decl: {
          start: {
            line: 55,
            column: 9
          },
          end: {
            line: 55,
            column: 27
          }
        },
        loc: {
          start: {
            line: 55,
            column: 41
          },
          end: {
            line: 76,
            column: 1
          }
        },
        line: 55
      },
      '2': {
        name: 'transformEncode',
        decl: {
          start: {
            line: 84,
            column: 9
          },
          end: {
            line: 84,
            column: 24
          }
        },
        loc: {
          start: {
            line: 84,
            column: 46
          },
          end: {
            line: 95,
            column: 1
          }
        },
        line: 84
      },
      '3': {
        name: 'transformDecode',
        decl: {
          start: {
            line: 103,
            column: 9
          },
          end: {
            line: 103,
            column: 24
          }
        },
        loc: {
          start: {
            line: 103,
            column: 46
          },
          end: {
            line: 123,
            column: 1
          }
        },
        line: 103
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        }, {
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        }],
        line: 59
      },
      '1': {
        loc: {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        }, {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        }],
        line: 71
      },
      '2': {
        loc: {
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 121,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 121,
            column: 5
          }
        }, {
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 121,
            column: 5
          }
        }],
        line: 117
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var cov_1foi4dgh3a = function () {
  var path = '/home/dtsvet/develop/projects/binary-data/src/index.js',
      hash = '3df7c72872ef5bd2ec7c6162fc6a0290dbeddd50',
      Function = function () {}.constructor,
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/home/dtsvet/develop/projects/binary-data/src/index.js',
    statementMap: {
      '0': {
        start: {
          line: 3,
          column: 21
        },
        end: {
          line: 3,
          column: 49
        }
      },
      '1': {
        start: {
          line: 4,
          column: 14
        },
        end: {
          line: 4,
          column: 36
        }
      },
      '2': {
        start: {
          line: 5,
          column: 15
        },
        end: {
          line: 5,
          column: 38
        }
      },
      '3': {
        start: {
          line: 6,
          column: 13
        },
        end: {
          line: 6,
          column: 34
        }
      },
      '4': {
        start: {
          line: 7,
          column: 17
        },
        end: {
          line: 7,
          column: 42
        }
      },
      '5': {
        start: {
          line: 8,
          column: 15
        },
        end: {
          line: 8,
          column: 38
        }
      },
      '6': {
        start: {
          line: 9,
          column: 16
        },
        end: {
          line: 9,
          column: 40
        }
      },
      '7': {
        start: {
          line: 10,
          column: 13
        },
        end: {
          line: 10,
          column: 34
        }
      },
      '8': {
        start: {
          line: 11,
          column: 15
        },
        end: {
          line: 11,
          column: 38
        }
      },
      '9': {
        start: {
          line: 12,
          column: 19
        },
        end: {
          line: 12,
          column: 40
        }
      },
      '10': {
        start: {
          line: 13,
          column: 19
        },
        end: {
          line: 13,
          column: 40
        }
      },
      '11': {
        start: {
          line: 14,
          column: 27
        },
        end: {
          line: 14,
          column: 57
        }
      },
      '12': {
        start: {
          line: 15,
          column: 20
        },
        end: {
          line: 15,
          column: 46
        }
      },
      '13': {
        start: {
          line: 16,
          column: 27
        },
        end: {
          line: 16,
          column: 63
        }
      },
      '14': {
        start: {
          line: 18,
          column: 14
        },
        end: {
          line: 26,
          column: 1
        }
      },
      '15': {
        start: {
          line: 28,
          column: 0
        },
        end: {
          line: 30,
          column: 1
        }
      },
      '16': {
        start: {
          line: 29,
          column: 2
        },
        end: {
          line: 29,
          column: 30
        }
      },
      '17': {
        start: {
          line: 32,
          column: 16
        },
        end: {
          line: 32,
          column: 32
        }
      },
      '18': {
        start: {
          line: 40,
          column: 17
        },
        end: {
          line: 44,
          column: 4
        }
      },
      '19': {
        start: {
          line: 46,
          column: 2
        },
        end: {
          line: 46,
          column: 27
        }
      },
      '20': {
        start: {
          line: 47,
          column: 2
        },
        end: {
          line: 47,
          column: 16
        }
      },
      '21': {
        start: {
          line: 56,
          column: 15
        },
        end: {
          line: 56,
          column: 19
        }
      },
      '22': {
        start: {
          line: 57,
          column: 19
        },
        end: {
          line: 57,
          column: 47
        }
      },
      '23': {
        start: {
          line: 59,
          column: 2
        },
        end: {
          line: 61,
          column: 3
        }
      },
      '24': {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 60,
          column: 25
        }
      },
      '25': {
        start: {
          line: 63,
          column: 17
        },
        end: {
          line: 67,
          column: 4
        }
      },
      '26': {
        start: {
          line: 69,
          column: 2
        },
        end: {
          line: 69,
          column: 27
        }
      },
      '27': {
        start: {
          line: 71,
          column: 2
        },
        end: {
          line: 73,
          column: 3
        }
      },
      '28': {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 31
        }
      },
      '29': {
        start: {
          line: 75,
          column: 2
        },
        end: {
          line: 75,
          column: 16
        }
      },
      '30': {
        start: {
          line: 85,
          column: 2
        },
        end: {
          line: 94,
          column: 3
        }
      },
      '31': {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 86,
          column: 39
        }
      },
      '32': {
        start: {
          line: 88,
          column: 16
        },
        end: {
          line: 88,
          column: 28
        }
      },
      '33': {
        start: {
          line: 89,
          column: 4
        },
        end: {
          line: 89,
          column: 29
        }
      },
      '34': {
        start: {
          line: 91,
          column: 4
        },
        end: {
          line: 91,
          column: 18
        }
      },
      '35': {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 93,
          column: 14
        }
      },
      '36': {
        start: {
          line: 104,
          column: 2
        },
        end: {
          line: 104,
          column: 21
        }
      },
      '37': {
        start: {
          line: 106,
          column: 2
        },
        end: {
          line: 122,
          column: 3
        }
      },
      '38': {
        start: {
          line: 107,
          column: 4
        },
        end: {
          line: 113,
          column: 5
        }
      },
      '39': {
        start: {
          line: 108,
          column: 26
        },
        end: {
          line: 108,
          column: 47
        }
      },
      '40': {
        start: {
          line: 109,
          column: 19
        },
        end: {
          line: 109,
          column: 53
        }
      },
      '41': {
        start: {
          line: 111,
          column: 6
        },
        end: {
          line: 111,
          column: 27
        }
      },
      '42': {
        start: {
          line: 112,
          column: 6
        },
        end: {
          line: 112,
          column: 22
        }
      },
      '43': {
        start: {
          line: 115,
          column: 4
        },
        end: {
          line: 115,
          column: 9
        }
      },
      '44': {
        start: {
          line: 117,
          column: 4
        },
        end: {
          line: 121,
          column: 5
        }
      },
      '45': {
        start: {
          line: 118,
          column: 6
        },
        end: {
          line: 118,
          column: 11
        }
      },
      '46': {
        start: {
          line: 120,
          column: 6
        },
        end: {
          line: 120,
          column: 16
        }
      },
      '47': {
        start: {
          line: 125,
          column: 0
        },
        end: {
          line: 139,
          column: 2
        }
      }
    },
    fnMap: {
      '0': {
        name: 'createEncodeStream',
        decl: {
          start: {
            line: 39,
            column: 9
          },
          end: {
            line: 39,
            column: 27
          }
        },
        loc: {
          start: {
            line: 39,
            column: 36
          },
          end: {
            line: 48,
            column: 1
          }
        },
        line: 39
      },
      '1': {
        name: 'createDecodeStream',
        decl: {
          start: {
            line: 55,
            column: 9
          },
          end: {
            line: 55,
            column: 27
          }
        },
        loc: {
          start: {
            line: 55,
            column: 41
          },
          end: {
            line: 76,
            column: 1
          }
        },
        line: 55
      },
      '2': {
        name: 'transformEncode',
        decl: {
          start: {
            line: 84,
            column: 9
          },
          end: {
            line: 84,
            column: 24
          }
        },
        loc: {
          start: {
            line: 84,
            column: 46
          },
          end: {
            line: 95,
            column: 1
          }
        },
        line: 84
      },
      '3': {
        name: 'transformDecode',
        decl: {
          start: {
            line: 103,
            column: 9
          },
          end: {
            line: 103,
            column: 24
          }
        },
        loc: {
          start: {
            line: 103,
            column: 46
          },
          end: {
            line: 123,
            column: 1
          }
        },
        line: 103
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        }, {
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        }],
        line: 59
      },
      '1': {
        loc: {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        }, {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        }],
        line: 71
      },
      '2': {
        loc: {
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 121,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 121,
            column: 5
          }
        }, {
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 121,
            column: 5
          }
        }],
        line: 117
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

const BinaryStream = /* istanbul ignore next */(cov_1foi4dgh3a.s[0]++, require('lib/binary-stream'));
const array = /* istanbul ignore next */(cov_1foi4dgh3a.s[1]++, require('types/array'));
const buffer = /* istanbul ignore next */(cov_1foi4dgh3a.s[2]++, require('types/buffer'));
const bool = /* istanbul ignore next */(cov_1foi4dgh3a.s[3]++, require('types/bool'));
const reserved = /* istanbul ignore next */(cov_1foi4dgh3a.s[4]++, require('types/reserved'));
const string = /* istanbul ignore next */(cov_1foi4dgh3a.s[5]++, require('types/string'));
const numbers = /* istanbul ignore next */(cov_1foi4dgh3a.s[6]++, require('types/numbers'));
const when = /* istanbul ignore next */(cov_1foi4dgh3a.s[7]++, require('types/when'));
const select = /* istanbul ignore next */(cov_1foi4dgh3a.s[8]++, require('types/select'));
const { encode } = /* istanbul ignore next */(cov_1foi4dgh3a.s[9]++, require('lib/encode'));
const { decode } = /* istanbul ignore next */(cov_1foi4dgh3a.s[10]++, require('lib/decode'));
const { encodingLength } = /* istanbul ignore next */(cov_1foi4dgh3a.s[11]++, require('lib/encoding-length'));
const Transaction = /* istanbul ignore next */(cov_1foi4dgh3a.s[12]++, require('lib/transaction'));
const NotEnoughDataError = /* istanbul ignore next */(cov_1foi4dgh3a.s[13]++, require('lib/not-enough-data-error'));

const types = /* istanbul ignore next */(cov_1foi4dgh3a.s[14]++, {
  array,
  bool,
  buffer,
  reserved,
  string,
  when,
  select
});

/* istanbul ignore next */cov_1foi4dgh3a.s[15]++;
cov_1foi4dgh3a.s[0]++;
for (const type of Object.keys(numbers)) {
  /* istanbul ignore next */cov_1foi4dgh3a.s[16]++;
  cov_1foi4dgh3a.s[1]++;

  types[type] = numbers[type]; // eslint-disable-line security/detect-object-injection
}

const kschema = /* istanbul ignore next */(cov_1foi4dgh3a.s[17]++, Symbol('schema'));

/**
 * Create transform stream to encode objects into Buffer.
 * @param {Object} [schema]
 * @returns {EncodeStream}
 */
function createEncodeStream(schema) {
  /* istanbul ignore next */cov_1foi4dgh3a.f[0]++;
  cov_1foi4dgh3a.f[0]++;

  const stream = /* istanbul ignore next */(cov_1foi4dgh3a.s[18]++, new BinaryStream({
    readableObjectMode: false,
    writableObjectMode: true,
    transform: transformEncode
  }));

  /* istanbul ignore next */cov_1foi4dgh3a.s[19]++;
  cov_1foi4dgh3a.s[2]++;
  stream[kschema] = schema;
  /* istanbul ignore next */cov_1foi4dgh3a.s[20]++;
  cov_1foi4dgh3a.s[3]++;
  return stream;
}

/**
 * Create transform stream to decode binary data into object.
 * @param {Buffer|Object} [bufOrSchema]
 * @returns {DecodeStream}
 */
function createDecodeStream(bufOrSchema) {
  /* istanbul ignore next */cov_1foi4dgh3a.f[1]++;
  cov_1foi4dgh3a.f[1]++;

  let schema = /* istanbul ignore next */(cov_1foi4dgh3a.s[21]++, null);
  const isBuffer = /* istanbul ignore next */(cov_1foi4dgh3a.s[22]++, Buffer.isBuffer(bufOrSchema));

  /* istanbul ignore next */cov_1foi4dgh3a.s[23]++;
  cov_1foi4dgh3a.s[4]++;
  if (!isBuffer) {
    /* istanbul ignore next */cov_1foi4dgh3a.b[0][0]++;
    cov_1foi4dgh3a.b[0][0]++;
    cov_1foi4dgh3a.s[24]++;
    cov_1foi4dgh3a.s[5]++;

    schema = bufOrSchema;
  } else /* istanbul ignore next */{
    cov_1foi4dgh3a.b[0][1]++;
    cov_1foi4dgh3a.b[0][1]++;
  }

  const stream = /* istanbul ignore next */(cov_1foi4dgh3a.s[25]++, new BinaryStream({
    transform: transformDecode,
    readableObjectMode: true,
    writableObjectMode: false
  }));

  /* istanbul ignore next */cov_1foi4dgh3a.s[26]++;
  cov_1foi4dgh3a.s[6]++;
  stream[kschema] = schema;

  /* istanbul ignore next */cov_1foi4dgh3a.s[27]++;
  cov_1foi4dgh3a.s[7]++;
  if (isBuffer) {
    /* istanbul ignore next */cov_1foi4dgh3a.b[1][0]++;
    cov_1foi4dgh3a.b[1][0]++;
    cov_1foi4dgh3a.s[28]++;
    cov_1foi4dgh3a.s[8]++;

    stream.append(bufOrSchema);
  } else /* istanbul ignore next */{
    cov_1foi4dgh3a.b[1][1]++;
    cov_1foi4dgh3a.b[1][1]++;
  }

  cov_1foi4dgh3a.s[29]++;
  cov_1foi4dgh3a.s[9]++;
  return stream;
}

/**
 * The `transform` function for transform stream.
 * @param {*} chunk Any valid js data type.
 * @param {string} encoding
 * @param {Function} cb
 */
function transformEncode(chunk, encoding, cb) {
  /* istanbul ignore next */cov_1foi4dgh3a.f[2]++;
  cov_1foi4dgh3a.f[2]++;
  cov_1foi4dgh3a.s[30]++;
  cov_1foi4dgh3a.s[10]++;

  try {
    /* istanbul ignore next */cov_1foi4dgh3a.s[31]++;
    cov_1foi4dgh3a.s[11]++;

    encode(chunk, this, this[kschema]);

    const buf = /* istanbul ignore next */(cov_1foi4dgh3a.s[32]++, this.slice());
    /* istanbul ignore next */cov_1foi4dgh3a.s[33]++;
    cov_1foi4dgh3a.s[12]++;
    this.consume(buf.length);

    /* istanbul ignore next */cov_1foi4dgh3a.s[34]++;
    cov_1foi4dgh3a.s[13]++;
    cb(null, buf);
  } catch (error) {
    /* istanbul ignore next */cov_1foi4dgh3a.s[35]++;
    cov_1foi4dgh3a.s[14]++;

    cb(error);
  }
}

/**
 * The `transform` function for transform stream.
 * @param {*} chunk Any valid js data type.
 * @param {string} encoding
 * @param {Function} cb
 */
function transformDecode(chunk, encoding, cb) {
  /* istanbul ignore next */cov_1foi4dgh3a.f[3]++;
  cov_1foi4dgh3a.f[3]++;
  cov_1foi4dgh3a.s[36]++;
  cov_1foi4dgh3a.s[15]++;

  this.append(chunk);

  /* istanbul ignore next */cov_1foi4dgh3a.s[37]++;
  cov_1foi4dgh3a.s[16]++;
  try {
    /* istanbul ignore next */cov_1foi4dgh3a.s[38]++;
    cov_1foi4dgh3a.s[17]++;

    while (this.length > 0) {
      const transaction = /* istanbul ignore next */(cov_1foi4dgh3a.s[39]++, new Transaction(this));
      const data = /* istanbul ignore next */(cov_1foi4dgh3a.s[40]++, decode(transaction, this[kschema]));

      /* istanbul ignore next */cov_1foi4dgh3a.s[41]++;
      cov_1foi4dgh3a.s[18]++;
      transaction.commit();
      /* istanbul ignore next */cov_1foi4dgh3a.s[42]++;
      cov_1foi4dgh3a.s[19]++;
      this.push(data);
    }

    /* istanbul ignore next */cov_1foi4dgh3a.s[43]++;
    cov_1foi4dgh3a.s[20]++;
    cb();
  } catch (error) {
    /* istanbul ignore next */cov_1foi4dgh3a.s[44]++;
    cov_1foi4dgh3a.s[21]++;

    if (error instanceof NotEnoughDataError) {
      /* istanbul ignore next */cov_1foi4dgh3a.b[2][0]++;
      cov_1foi4dgh3a.b[2][0]++;
      cov_1foi4dgh3a.s[45]++;
      cov_1foi4dgh3a.s[22]++;

      cb();
    } else {
      /* istanbul ignore next */cov_1foi4dgh3a.b[2][1]++;
      cov_1foi4dgh3a.b[2][1]++;
      cov_1foi4dgh3a.s[46]++;
      cov_1foi4dgh3a.s[23]++;

      cb(error);
    }
  }
}

/* istanbul ignore next */cov_1foi4dgh3a.s[47]++;
cov_1foi4dgh3a.s[24]++;
module.exports = {
  /* Main api */
  createEncodeStream,
  createDecodeStream,
  encode,
  decode,
  encodingLength,

  /* Data types */
  types,

  /* Re-export utils */
  BinaryStream,
  NotEnoughDataError
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJpbmFyeVN0cmVhbSIsInJlcXVpcmUiLCJhcnJheSIsImJ1ZmZlciIsImJvb2wiLCJyZXNlcnZlZCIsInN0cmluZyIsIm51bWJlcnMiLCJ3aGVuIiwic2VsZWN0IiwiZW5jb2RlIiwiZGVjb2RlIiwiZW5jb2RpbmdMZW5ndGgiLCJUcmFuc2FjdGlvbiIsIk5vdEVub3VnaERhdGFFcnJvciIsInR5cGVzIiwidHlwZSIsIk9iamVjdCIsImtleXMiLCJrc2NoZW1hIiwiU3ltYm9sIiwiY3JlYXRlRW5jb2RlU3RyZWFtIiwic2NoZW1hIiwic3RyZWFtIiwicmVhZGFibGVPYmplY3RNb2RlIiwid3JpdGFibGVPYmplY3RNb2RlIiwidHJhbnNmb3JtIiwidHJhbnNmb3JtRW5jb2RlIiwiY3JlYXRlRGVjb2RlU3RyZWFtIiwiYnVmT3JTY2hlbWEiLCJpc0J1ZmZlciIsIkJ1ZmZlciIsInRyYW5zZm9ybURlY29kZSIsImFwcGVuZCIsImNodW5rIiwiZW5jb2RpbmciLCJjYiIsImJ1ZiIsInNsaWNlIiwiY29uc3VtZSIsImxlbmd0aCIsImVycm9yIiwidHJhbnNhY3Rpb24iLCJkYXRhIiwiY29tbWl0IiwicHVzaCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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UUFMZTtBQU1mQyxnQkFOZTs7QUFRZjtBQUNBRyxPQVRlOztBQVdmO0FBQ0FmLGNBWmU7QUFhZmM7QUFiZSxDQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgQmluYXJ5U3RyZWFtID0gcmVxdWlyZSgnbGliL2JpbmFyeS1zdHJlYW0nKTtcbmNvbnN0IGFycmF5ID0gcmVxdWlyZSgndHlwZXMvYXJyYXknKTtcbmNvbnN0IGJ1ZmZlciA9IHJlcXVpcmUoJ3R5cGVzL2J1ZmZlcicpO1xuY29uc3QgYm9vbCA9IHJlcXVpcmUoJ3R5cGVzL2Jvb2wnKTtcbmNvbnN0IHJlc2VydmVkID0gcmVxdWlyZSgndHlwZXMvcmVzZXJ2ZWQnKTtcbmNvbnN0IHN0cmluZyA9IHJlcXVpcmUoJ3R5cGVzL3N0cmluZycpO1xuY29uc3QgbnVtYmVycyA9IHJlcXVpcmUoJ3R5cGVzL251bWJlcnMnKTtcbmNvbnN0IHdoZW4gPSByZXF1aXJlKCd0eXBlcy93aGVuJyk7XG5jb25zdCBzZWxlY3QgPSByZXF1aXJlKCd0eXBlcy9zZWxlY3QnKTtcbmNvbnN0IHsgZW5jb2RlIH0gPSByZXF1aXJlKCdsaWIvZW5jb2RlJyk7XG5jb25zdCB7IGRlY29kZSB9ID0gcmVxdWlyZSgnbGliL2RlY29kZScpO1xuY29uc3QgeyBlbmNvZGluZ0xlbmd0aCB9ID0gcmVxdWlyZSgnbGliL2VuY29kaW5nLWxlbmd0aCcpO1xuY29uc3QgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCdsaWIvdHJhbnNhY3Rpb24nKTtcbmNvbnN0IE5vdEVub3VnaERhdGFFcnJvciA9IHJlcXVpcmUoJ2xpYi9ub3QtZW5vdWdoLWRhdGEtZXJyb3InKTtcblxuY29uc3QgdHlwZXMgPSB7XG4gIGFycmF5LFxuICBib29sLFxuICBidWZmZXIsXG4gIHJlc2VydmVkLFxuICBzdHJpbmcsXG4gIHdoZW4sXG4gIHNlbGVjdCxcbn07XG5cbmZvciAoY29uc3QgdHlwZSBvZiBPYmplY3Qua2V5cyhudW1iZXJzKSkge1xuICB0eXBlc1t0eXBlXSA9IG51bWJlcnNbdHlwZV07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgc2VjdXJpdHkvZGV0ZWN0LW9iamVjdC1pbmplY3Rpb25cbn1cblxuY29uc3Qga3NjaGVtYSA9IFN5bWJvbCgnc2NoZW1hJyk7XG5cbi8qKlxuICogQ3JlYXRlIHRyYW5zZm9ybSBzdHJlYW0gdG8gZW5jb2RlIG9iamVjdHMgaW50byBCdWZmZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gW3NjaGVtYV1cbiAqIEByZXR1cm5zIHtFbmNvZGVTdHJlYW19XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVuY29kZVN0cmVhbShzY2hlbWEpIHtcbiAgY29uc3Qgc3RyZWFtID0gbmV3IEJpbmFyeVN0cmVhbSh7XG4gICAgcmVhZGFibGVPYmplY3RNb2RlOiBmYWxzZSxcbiAgICB3cml0YWJsZU9iamVjdE1vZGU6IHRydWUsXG4gICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm1FbmNvZGUsXG4gIH0pO1xuXG4gIHN0cmVhbVtrc2NoZW1hXSA9IHNjaGVtYTtcbiAgcmV0dXJuIHN0cmVhbTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgdHJhbnNmb3JtIHN0cmVhbSB0byBkZWNvZGUgYmluYXJ5IGRhdGEgaW50byBvYmplY3QuXG4gKiBAcGFyYW0ge0J1ZmZlcnxPYmplY3R9IFtidWZPclNjaGVtYV1cbiAqIEByZXR1cm5zIHtEZWNvZGVTdHJlYW19XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURlY29kZVN0cmVhbShidWZPclNjaGVtYSkge1xuICBsZXQgc2NoZW1hID0gbnVsbDtcbiAgY29uc3QgaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXIoYnVmT3JTY2hlbWEpO1xuXG4gIGlmICghaXNCdWZmZXIpIHtcbiAgICBzY2hlbWEgPSBidWZPclNjaGVtYTtcbiAgfVxuXG4gIGNvbnN0IHN0cmVhbSA9IG5ldyBCaW5hcnlTdHJlYW0oe1xuICAgIHRyYW5zZm9ybTogdHJhbnNmb3JtRGVjb2RlLFxuICAgIHJlYWRhYmxlT2JqZWN0TW9kZTogdHJ1ZSxcbiAgICB3cml0YWJsZU9iamVjdE1vZGU6IGZhbHNlLFxuICB9KTtcblxuICBzdHJlYW1ba3NjaGVtYV0gPSBzY2hlbWE7XG5cbiAgaWYgKGlzQnVmZmVyKSB7XG4gICAgc3RyZWFtLmFwcGVuZChidWZPclNjaGVtYSk7XG4gIH1cblxuICByZXR1cm4gc3RyZWFtO1xufVxuXG4vKipcbiAqIFRoZSBgdHJhbnNmb3JtYCBmdW5jdGlvbiBmb3IgdHJhbnNmb3JtIHN0cmVhbS5cbiAqIEBwYXJhbSB7Kn0gY2h1bmsgQW55IHZhbGlkIGpzIGRhdGEgdHlwZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvZGluZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtRW5jb2RlKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdHJ5IHtcbiAgICBlbmNvZGUoY2h1bmssIHRoaXMsIHRoaXNba3NjaGVtYV0pO1xuXG4gICAgY29uc3QgYnVmID0gdGhpcy5zbGljZSgpO1xuICAgIHRoaXMuY29uc3VtZShidWYubGVuZ3RoKTtcblxuICAgIGNiKG51bGwsIGJ1Zik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY2IoZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGB0cmFuc2Zvcm1gIGZ1bmN0aW9uIGZvciB0cmFuc2Zvcm0gc3RyZWFtLlxuICogQHBhcmFtIHsqfSBjaHVuayBBbnkgdmFsaWQganMgZGF0YSB0eXBlLlxuICogQHBhcmFtIHtzdHJpbmd9IGVuY29kaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1EZWNvZGUoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aGlzLmFwcGVuZChjaHVuayk7XG5cbiAgdHJ5IHtcbiAgICB3aGlsZSAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IG5ldyBUcmFuc2FjdGlvbih0aGlzKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBkZWNvZGUodHJhbnNhY3Rpb24sIHRoaXNba3NjaGVtYV0pO1xuXG4gICAgICB0cmFuc2FjdGlvbi5jb21taXQoKTtcbiAgICAgIHRoaXMucHVzaChkYXRhKTtcbiAgICB9XG5cbiAgICBjYigpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE5vdEVub3VnaERhdGFFcnJvcikge1xuICAgICAgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2IoZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLyogTWFpbiBhcGkgKi9cbiAgY3JlYXRlRW5jb2RlU3RyZWFtLFxuICBjcmVhdGVEZWNvZGVTdHJlYW0sXG4gIGVuY29kZSxcbiAgZGVjb2RlLFxuICBlbmNvZGluZ0xlbmd0aCxcblxuICAvKiBEYXRhIHR5cGVzICovXG4gIHR5cGVzLFxuXG4gIC8qIFJlLWV4cG9ydCB1dGlscyAqL1xuICBCaW5hcnlTdHJlYW0sXG4gIE5vdEVub3VnaERhdGFFcnJvcixcbn07XG4iXX0=