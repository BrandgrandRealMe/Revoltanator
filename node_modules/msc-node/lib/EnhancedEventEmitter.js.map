{"version":3,"file":"EnhancedEventEmitter.js","sourceRoot":"","sources":["../src/EnhancedEventEmitter.ts"],"names":[],"mappings":";;;AAAA,mCAAsC;AACtC,qCAAkC;AAElC,MAAM,MAAM,GAAG,IAAI,eAAM,CAAC,sBAAsB,CAAC,CAAC;AAElD,MAAa,oBAAqB,SAAQ,qBAAY;IAErD;QAEC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;IAChC,CAAC;IAED,QAAQ,CAAC,KAAa,EAAE,GAAG,IAAW;QAErC,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAE/C,IACA;YACC,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;SACjC;QACD,OAAO,KAAK,EACZ;YACC,MAAM,CAAC,KAAK,CACX,0DAA0D,EAC1D,KAAK,EAAE,KAAK,CAAC,CAAC;YAEf,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC;SAC7B;IACF,CAAC;IAED,KAAK,CAAC,iBAAiB,CAAC,KAAa,EAAE,GAAG,IAAW;QAEpD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YAEtC,IACA;gBACC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;aAC3C;YACD,OAAO,KAAK,EACZ;gBACC,MAAM,CAAC,KAAK,CACX,mEAAmE,EACnE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAEf,MAAM,CAAC,KAAK,CAAC,CAAC;aACd;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;CACD;AA5CD,oDA4CC","sourcesContent":["import { EventEmitter } from 'events';\nimport { Logger } from './Logger';\n\nconst logger = new Logger('EnhancedEventEmitter');\n\nexport class EnhancedEventEmitter extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setMaxListeners(Infinity);\n\t}\n\n\tsafeEmit(event: string, ...args: any[]): boolean\n\t{\n\t\tconst numListeners = this.listenerCount(event);\n\n\t\ttry\n\t\t{\n\t\t\treturn this.emit(event, ...args);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error(\n\t\t\t\t'safeEmit() | event listener threw an error [event:%s]:%o',\n\t\t\t\tevent, error);\n\n\t\t\treturn Boolean(numListeners);\n\t\t}\n\t}\n\n\tasync safeEmitAsPromise(event: string, ...args: any[]): Promise<any>\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.emit(event, ...args, resolve, reject);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error(\n\t\t\t\t\t'safeEmitAsPromise() | event listener threw an error [event:%s]:%o',\n\t\t\t\t\tevent, error);\n\n\t\t\t\treject(error);\n\t\t\t}\n\t\t});\n\t}\n}\n"]}